!function(e,a,o){var c,i,r=[];e.AcfFieldGroupControl=e.Control.extend({preview_context:{type:null,id:null},initialize:function(t,n){var i;i=n||{},e.Control.prototype.initialize.call(this,t,i)},set_preview_context:function(t){return this.preview_context=t,this},ready:function(){var i=this;this.setting();0<=["post","term","user"].indexOf(i.params.storage_type)&&e.bind("acf-customize-context-changed",function(t){t.type===i.params.storage_type?i.set_preview_context(t).load_form():i.unload_form()}),this.$wrapper=i.container.find(".acf-fields").first(),acf.do_action("append",i.container),i.load_form(),i.container.on("change",".acf-field",function(t){var n=i.container.find(".acf-field :input");acf.validation.errors=[],n.each(function(){this.checkValidity()}),acf.validation.busy=!1,c=i,acf.validation.fetch({form:i.container,lock:!1,success:function(t){}})}),e.Control.prototype.ready.apply(i,arguments)},load_form:function(){var t,n,i,e,a=this;t=wp.ajax.send("load_customizer_field_groups_"+a.id,{data:{wp_customize:"on",section_id:a.id,acf_customize_context:JSON.stringify(a.preview_context),_nonce:o.load_field_group_nonce}}),n=t,i=function(t){a.$wrapper.html(t.html),a.init_fields()},e={idx:r.length,request:n,done:i,finished:!1,scope:null,arguments:null},r.push(e),n.done(function(){var t;for(e.finished=!0,e.self=this,e.arguments=arguments;r.length&&r[0].finished;)(t=r.shift()).done.apply(t.self,t.arguments)}),t.fail(function(t){console.log(" - load field group failure")}),t.always(function(){t=null})},unload_form:function(){this.$wrapper.html("")},init_fields:function(){var t=this;t.$fields=t.container.find(".acf-fields > .acf-field"),setTimeout(function(){acf.doAction("ready",t.$wrapper),acf.doAction("prepare")},1)},updateValues:function(){var t,n=this.container.find(".acf-field :input");n.each(function(){var t=a(this).attr("name");t&&(a(this).data("prev-name",t),a(this).attr("name",t.replace(/\[([0-9]+)\]/g,"[_$1]")))}),t=n.serializeJSON({useIntKeysAsArrayIndex:!1}),n.each(function(){a(this).attr("name",a(this).data("prev-name")),a(this).data("prev-name",null)}),this.setting.set(function i(e){return a.isPlainObject(e)&&(Object.keys(e).join("").match(/^([0-9_]+)$/)&&(e=Object.values(e)),a.each(e,function(t,n){e[t]=i(n)})),e}(t[this.id]))}}),acf.add_action("validation_success",function(t){c.updateValues()}),acf.add_action("validation_failure",function(t){c.container.find("> .acf-error-message").remove()}),acf.add_action("invalid",function(t){acf.validation.busy=!0}),e.bind("ready",function(){e.previewer.bind("acf-customize-context",function(t){var n;n=i,JSON.stringify(t)!=JSON.stringify(n)&&e.trigger("acf-customize-context-changed",t),i=t})}),e.bind("save-request-params",function(t){_.extend(t,{acf_customize_context:JSON.stringify(i)})}),e.controlConstructor.acf_customizer=e.AcfFieldGroupControl,e.bind("changeset-error",function(){})}(wp.customize,jQuery,acf_fieldgroup_control);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLmpzIl0sIm5hbWVzIjpbImFwaSIsIiQiLCJvcHRpb25zIiwiY3VycmVudF9jb250cm9sIiwiYWNmX2N1c3RvbWl6ZV9jb250ZXh0IiwicXVldWUiLCJBY2ZGaWVsZEdyb3VwQ29udHJvbCIsIkNvbnRyb2wiLCJleHRlbmQiLCJwcmV2aWV3X2NvbnRleHQiLCJ0eXBlIiwiaWQiLCJpbml0aWFsaXplIiwib3B0IiwiYXJncyIsInByb3RvdHlwZSIsImNhbGwiLCJ0aGlzIiwic2V0X3ByZXZpZXdfY29udGV4dCIsImNvbnRleHQiLCJyZWFkeSIsImNvbnRyb2wiLCJzZXR0aW5nIiwiaW5kZXhPZiIsInBhcmFtcyIsInN0b3JhZ2VfdHlwZSIsImJpbmQiLCJsb2FkX2Zvcm0iLCJ1bmxvYWRfZm9ybSIsIiR3cmFwcGVyIiwiY29udGFpbmVyIiwiZmluZCIsImZpcnN0IiwiYWNmIiwiZG9fYWN0aW9uIiwib24iLCJlIiwiJGlucHV0cyIsInZhbGlkYXRpb24iLCJlcnJvcnMiLCJlYWNoIiwiY2hlY2tWYWxpZGl0eSIsImJ1c3kiLCJmZXRjaCIsImZvcm0iLCJsb2NrIiwic3VjY2VzcyIsIiRmb3JtIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJyZXF1ZXN0IiwiZG9uZSIsIml0ZW0iLCJ3cCIsImFqYXgiLCJzZW5kIiwiZGF0YSIsIndwX2N1c3RvbWl6ZSIsInNlY3Rpb25faWQiLCJKU09OIiwic3RyaW5naWZ5IiwiX25vbmNlIiwibG9hZF9maWVsZF9ncm91cF9ub25jZSIsInJlc3BvbnNlIiwiaHRtbCIsImluaXRfZmllbGRzIiwiaWR4IiwibGVuZ3RoIiwiZmluaXNoZWQiLCJzY29wZSIsInB1c2giLCJpdCIsInNlbGYiLCJzaGlmdCIsImZhaWwiLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiJGZpZWxkcyIsInNldFRpbWVvdXQiLCJkb0FjdGlvbiIsInVwZGF0ZVZhbHVlcyIsInZhbHVlIiwibmFtZSIsImF0dHIiLCJyZXBsYWNlIiwic2VyaWFsaXplSlNPTiIsInVzZUludEtleXNBc0FycmF5SW5kZXgiLCJzZXQiLCJmaXhOdW1LZXlzIiwib2JqIiwiaXNQbGFpbk9iamVjdCIsIk9iamVjdCIsImtleXMiLCJqb2luIiwibWF0Y2giLCJ2YWx1ZXMiLCJpIiwiZWwiLCJhZGRfYWN0aW9uIiwicmVtb3ZlIiwiJGlucHV0IiwicHJldmlld2VyIiwibmV3X3ZhbCIsInByZXZfdmFsIiwidHJpZ2dlciIsInF1ZXJ5IiwiXyIsImNvbnRyb2xDb25zdHJ1Y3RvciIsImN1c3RvbWl6ZSIsImpRdWVyeSIsImFjZl9maWVsZGdyb3VwX2NvbnRyb2wiXSwibWFwcGluZ3MiOiJDQUNBLFNBQVdBLEVBQUtDLEVBQUdDLEdBR2xCLElBQUlDLEVBQ0hDLEVBQ0FDLEVBQVEsR0FzQlRMLEVBQUlNLHFCQUF1Qk4sRUFBSU8sUUFBUUMsT0FBTyxDQUM3Q0MsZ0JBQWlCLENBQ2hCQyxLQUFNLEtBQ05DLEdBQUksTUFFTEMsV0FBWSxTQUFVRCxFQUFJRSxHQUN6QixJQUFvQkMsRUFFWEEsRUFBT0QsR0FBTyxHQUV2QmIsRUFBSU8sUUFBUVEsVUFBVUgsV0FBV0ksS0FKbkJDLEtBSWtDTixFQUFJRyxJQUdyREksb0JBQXFCLFNBQVNDLEdBRTdCLE9BREFGLEtBQUtSLGdCQUFrQlUsRUFDaEJGLE1BRVJHLE1BQU8sV0FDTixJQUFJQyxFQUFVSixLQUNGQSxLQUFLSyxVQUVaLEdBQUssQ0FBQyxPQUFPLE9BQU8sUUFBUUMsUUFBU0YsRUFBUUcsT0FBT0MsZUFFeER6QixFQUFJMEIsS0FBTSxnQ0FBaUMsU0FBVVAsR0FFL0NBLEVBQVFULE9BQVNXLEVBQVFHLE9BQU9DLGFBQ3BDSixFQUNFSCxvQkFBcUJDLEdBQ3JCUSxZQUVGTixFQUFRTyxnQkFNWFgsS0FBS1ksU0FBV1IsRUFBUVMsVUFBVUMsS0FBSyxlQUFlQyxRQUN0REMsSUFBSUMsVUFBVyxTQUFVYixFQUFRUyxXQUVqQ1QsRUFBUU0sWUFFUk4sRUFBUVMsVUFBVUssR0FBRyxTQUFTLGFBQWMsU0FBU0MsR0FHcEQsSUFBSUMsRUFBVWhCLEVBQVFTLFVBQVVDLEtBQUsscUJBRXJDRSxJQUFJSyxXQUFXQyxPQUFTLEdBQ3hCRixFQUFRRyxLQUFLLFdBQ1p2QixLQUFLd0Isa0JBR05SLElBQUlLLFdBQVdJLE1BQU8sRUFDdEJ2QyxFQUFrQmtCLEVBQ2xCWSxJQUFJSyxXQUFXSyxNQUFPLENBQ3JCQyxLQUFNdkIsRUFBUVMsVUFDZGUsTUFBSyxFQUNMQyxRQUFRLFNBQVNDLFNBVW5CL0MsRUFBSU8sUUFBUVEsVUFBVUssTUFBTTRCLE1BQU8zQixFQUFTNEIsWUFHN0N0QixVQUFXLFdBRVYsSUFDQ3VCLEVBM0ZjQSxFQUFRQyxFQUV2QkMsRUF3RkkvQixFQUFVSixLQUdkaUMsRUFBVUcsR0FBR0MsS0FBS0MsS0FBTSxnQ0FBZ0NsQyxFQUFRVixHQUFJLENBQ25FNkMsS0FBTSxDQUNMQyxhQUFpQixLQUNqQkMsV0FBZ0JyQyxFQUFRVixHQUN4QlAsc0JBQXdCdUQsS0FBS0MsVUFBV3ZDLEVBQVFaLGlCQUNoRG9ELE9BQWEzRCxFQUFRNEQsMEJBbEdSWixFQXVHTkEsRUF2R2NDLEVBdUdMLFNBQVNZLEdBRTFCMUMsRUFBUVEsU0FBU21DLEtBQU1ELEVBQVNDLE1BRWhDM0MsRUFBUTRDLGVBekdUYixFQUFPLENBQUVjLElBREE3RCxFQUFNOEQsT0FDR2pCLFFBQVFBLEVBQVNDLEtBQU1BLEVBQU1pQixVQUFTLEVBQU9DLE1BQU0sS0FBTXBCLFVBQVUsTUFFdEY1QyxFQUFNaUUsS0FBTWxCLEdBRVpGLEVBQVFDLEtBQU0sV0FDYixJQUFJb0IsRUFJSixJQUhBbkIsRUFBS2dCLFVBQVcsRUFDaEJoQixFQUFLb0IsS0FBT3ZELEtBQ1ptQyxFQUFLSCxVQUFZQSxVQUNUNUMsRUFBTThELFFBQVU5RCxFQUFNLEdBQUcrRCxXQUNoQ0csRUFBS2xFLEVBQU1vRSxTQUNSdEIsS0FBS0gsTUFBT3VCLEVBQUdDLEtBQU1ELEVBQUd0QixhQWlHNUJDLEVBQVF3QixLQUFNLFNBQVVYLEdBQ3ZCWSxRQUFRQyxJQUFJLGlDQUdiMUIsRUFBUTJCLE9BQVEsV0FDZjNCLEVBQVUsUUFJWnRCLFlBQWEsV0FDRVgsS0FFTlksU0FBU21DLEtBQU0sS0FFeEJDLFlBQWEsV0FFWixJQUFJNUMsRUFBVUosS0FFZEksRUFBUXlELFFBQVV6RCxFQUFRUyxVQUFVQyxLQUFLLDRCQUd6Q2dELFdBQVcsV0FDVjlDLElBQUkrQyxTQUFTLFFBQVMzRCxFQUFRUSxVQUM5QkksSUFBSStDLFNBQVMsWUFDWixJQUVIQyxhQUFjLFdBQ2IsSUFFQ0MsRUFEQTdDLEVBRGFwQixLQUNLYSxVQUFVQyxLQUFLLHFCQW9CbENNLEVBQVFHLEtBQUssV0FDWixJQUFJMkMsRUFBT2xGLEVBQUVnQixNQUFNbUUsS0FBSyxRQUVqQkQsSUFHUGxGLEVBQUVnQixNQUFNdUMsS0FBSyxZQUFhMkIsR0FDMUJsRixFQUFFZ0IsTUFBTW1FLEtBQUssT0FBT0QsRUFBS0UsUUFBUyxnQkFBaUIsYUFHcERILEVBQVE3QyxFQUFRaUQsY0FBYyxDQUM3QkMsd0JBQXVCLElBSXhCbEQsRUFBUUcsS0FBSyxXQUNadkMsRUFBRWdCLE1BQU1tRSxLQUFNLE9BQVFuRixFQUFFZ0IsTUFBTXVDLEtBQUssY0FDbkN2RCxFQUFFZ0IsTUFBTXVDLEtBQUssWUFBYSxRQXRDYnZDLEtBMENOSyxRQUFRa0UsSUFyQ2hCLFNBQVNDLEVBQVlDLEdBV3BCLE9BVkt6RixFQUFFMEYsY0FBZUQsS0FFaEJFLE9BQU9DLEtBQU1ILEdBQU1JLEtBQUssSUFBSUMsTUFBTSxpQkFDdENMLEVBQU1FLE9BQU9JLE9BQVFOLElBR3RCekYsRUFBRXVDLEtBQU1rRCxFQUFJLFNBQVNPLEVBQUVDLEdBQ3RCUixFQUFJTyxHQUFLUixFQUFZUyxNQUdoQlIsRUEwQmFELENBQVlQLEVBQU1qRSxLQUFLTixTQUk5Q3NCLElBQUlrRSxXQUFXLHFCQUFzQixTQUFTL0QsR0FDN0NqQyxFQUFnQjhFLGlCQUVqQmhELElBQUlrRSxXQUFXLHFCQUFxQixTQUFTL0QsR0FFNUNqQyxFQUFnQjJCLFVBQVVDLEtBQUssd0JBQXdCcUUsV0FFeERuRSxJQUFJa0UsV0FBVyxVQUFXLFNBQVNFLEdBQ2xDcEUsSUFBSUssV0FBV0ksTUFBTyxJQUt2QjFDLEVBQUkwQixLQUFLLFFBQVEsV0FDaEIxQixFQUFJc0csVUFBVTVFLEtBQU0sd0JBQXlCLFNBQVU2RSxHQUN0RCxJQUFJQyxFQUVKQSxFQUFXcEcsRUFDTnVELEtBQUtDLFVBQVUyQyxJQUFZNUMsS0FBS0MsVUFBVTRDLElBQzlDeEcsRUFBSXlHLFFBQVMsZ0NBQWlDRixHQUUvQ25HLEVBQXdCbUcsTUFLMUJ2RyxFQUFJMEIsS0FBTSxzQkFBdUIsU0FBU2dGLEdBQ3pDQyxFQUFFbkcsT0FBUWtHLEVBQU8sQ0FBQ3RHLHNCQUEwQnVELEtBQUtDLFVBQVd4RCxPQUk1REosRUFBSTRHLG1CQUFtQyxlQUFJNUcsRUFBSU0scUJBRWhETixFQUFJMEIsS0FBSyxrQkFBbUIsY0FoTzdCLENBc09JMkIsR0FBR3dELFVBQVdDLE9BQVFDIiwiZmlsZSI6ImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uKCBhcGksICQsIG9wdGlvbnMgKSB7XG5cblx0Ly8gc3RvcmUgZm9yIGFjZidzIHN0YXRpYyB2YWxpZGF0aW9uIGNhbGxiYWNrc1xuXHR2YXIgY3VycmVudF9jb250cm9sLFxuXHRcdGFjZl9jdXN0b21pemVfY29udGV4dCxcblx0XHRxdWV1ZSA9IFtdO1xuXG5cdC8vIG1ha2Ugc3VyZSBmaWVsZHMgZ2V0IGluaXRlZCBpbiB0aGUgb3JkZXIgdGhleSBhcHBlYXIgaW4gdGhlIGRvbVxuXHRmdW5jdGlvbiBlbnF1ZXVlKHJlcXVlc3QsZG9uZSkge1xuXHRcdHZhciBpZHggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRpdGVtID0geyBpZHg6aWR4LCByZXF1ZXN0OnJlcXVlc3QsIGRvbmU6IGRvbmUsIGZpbmlzaGVkOmZhbHNlLCBzY29wZTpudWxsLCBhcmd1bWVudHM6bnVsbCB9O1xuXG5cdFx0cXVldWUucHVzaCggaXRlbSApO1xuXG5cdFx0cmVxdWVzdC5kb25lKCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIGl0O1xuXHRcdFx0aXRlbS5maW5pc2hlZCA9IHRydWU7XG5cdFx0XHRpdGVtLnNlbGYgPSB0aGlzO1xuXHRcdFx0aXRlbS5hcmd1bWVudHMgPSBhcmd1bWVudHM7XG5cdFx0XHR3aGlsZSAoIHF1ZXVlLmxlbmd0aCAmJiBxdWV1ZVswXS5maW5pc2hlZCApIHtcblx0XHRcdFx0aXQgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHRpdC5kb25lLmFwcGx5KCBpdC5zZWxmLCBpdC5hcmd1bWVudHMgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cblxuXG5cdGFwaS5BY2ZGaWVsZEdyb3VwQ29udHJvbCA9IGFwaS5Db250cm9sLmV4dGVuZCh7XG5cdFx0cHJldmlld19jb250ZXh0OiB7XG5cdFx0XHR0eXBlOiBudWxsLFxuXHRcdFx0aWQ6IG51bGwsXG5cdFx0fSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbiggaWQsIG9wdCApIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcywgYXJncztcblxuICAgICAgICAgICAgYXJncyA9IG9wdCB8fCB7fTtcblxuXHRcdFx0YXBpLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCggY29udHJvbCwgaWQsIGFyZ3MgKTtcblxuXHRcdH0sXG5cdFx0c2V0X3ByZXZpZXdfY29udGV4dDogZnVuY3Rpb24oY29udGV4dCkge1xuXHRcdFx0dGhpcy5wcmV2aWV3X2NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZWFkeTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsXG5cdFx0XHRcdHNldHRpbmdzID0gdGhpcy5zZXR0aW5nKCk7XG5cblx0XHRcdGlmICggMCA8PSBbJ3Bvc3QnLCd0ZXJtJywndXNlciddLmluZGV4T2YoIGNvbnRyb2wucGFyYW1zLnN0b3JhZ2VfdHlwZSApICkge1xuXHRcdFx0XHQvLyByZWxvYWQgZmllbGRzIGlmIHByZXZpZXcgdXJsIGNoYW5nZWRcblx0XHRcdFx0YXBpLmJpbmQoICdhY2YtY3VzdG9taXplLWNvbnRleHQtY2hhbmdlZCcsIGZ1bmN0aW9uKCBjb250ZXh0ICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0LnR5cGUgPT09IGNvbnRyb2wucGFyYW1zLnN0b3JhZ2VfdHlwZSApIHtcblx0XHRcdFx0XHRcdGNvbnRyb2xcblx0XHRcdFx0XHRcdFx0LnNldF9wcmV2aWV3X2NvbnRleHQoIGNvbnRleHQgKVxuXHRcdFx0XHRcdFx0XHQubG9hZF9mb3JtKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnRyb2wudW5sb2FkX2Zvcm0oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLiR3cmFwcGVyID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZHMnKS5maXJzdCgpO1xuXHRcdFx0YWNmLmRvX2FjdGlvbiggJ2FwcGVuZCcsIGNvbnRyb2wuY29udGFpbmVyICk7XG5cblx0XHRcdGNvbnRyb2wubG9hZF9mb3JtKCk7XG5cblx0XHRcdGNvbnRyb2wuY29udGFpbmVyLm9uKCdjaGFuZ2UnLCcuYWNmLWZpZWxkJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdC8vKlxuXHRcdFx0XHQvLyBjaGVjayB2YWxpZFxuXHRcdFx0XHR2YXIgJGlucHV0cyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGQgOmlucHV0Jyk7XG5cblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uZXJyb3JzID0gW107XG5cdFx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5idXN5ID0gZmFsc2U7XG5cdFx0XHRcdGN1cnJlbnRfY29udHJvbCA9IGNvbnRyb2w7XG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmZldGNoKCB7XG5cdFx0XHRcdFx0Zm9ybTogY29udHJvbC5jb250YWluZXIsXG5cdFx0XHRcdFx0bG9jazpmYWxzZSxcblx0XHRcdFx0XHRzdWNjZXNzOmZ1bmN0aW9uKCRmb3JtKSB7XG5cdFx0XHRcdFx0XHQvLyBhbGxvdyBmb3Igc3VibWl0XG5cdFx0XHRcdFx0XHQvLyBhY2YudmFsaWRhdGlvbi5pZ25vcmUgPSAxO1xuXHRcdFx0XHRcdFx0Ly8gJGJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9KTtcblxuXHRcdFx0YXBpLkNvbnRyb2wucHJvdG90eXBlLnJlYWR5LmFwcGx5KCBjb250cm9sLCBhcmd1bWVudHMgKTtcblxuXHRcdH0sXG5cdFx0bG9hZF9mb3JtOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHRyZXF1ZXN0O1xuXG5cdFx0XHRyZXF1ZXN0ID0gd3AuYWpheC5zZW5kKCAnbG9hZF9jdXN0b21pemVyX2ZpZWxkX2dyb3Vwc18nK2NvbnRyb2wuaWQsIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHdwX2N1c3RvbWl6ZVx0XHRcdDogJ29uJyxcblx0XHRcdFx0XHRzZWN0aW9uX2lkXHRcdFx0XHQ6IGNvbnRyb2wuaWQsXG5cdFx0XHRcdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0XHQ6IEpTT04uc3RyaW5naWZ5KCBjb250cm9sLnByZXZpZXdfY29udGV4dCApLFxuXHRcdFx0XHRcdF9ub25jZVx0XHRcdFx0XHQ6IG9wdGlvbnMubG9hZF9maWVsZF9ncm91cF9ub25jZSxcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cblx0XHRcdGVucXVldWUoIHJlcXVlc3QsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cblx0XHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCByZXNwb25zZS5odG1sICk7XG5cblx0XHRcdFx0Y29udHJvbC5pbml0X2ZpZWxkcygpO1xuXG5cdFx0XHR9ICk7XG5cdFx0XHRyZXF1ZXN0LmZhaWwoIGZ1bmN0aW9uKCByZXNwb25zZSApIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJyAtIGxvYWQgZmllbGQgZ3JvdXAgZmFpbHVyZScpXG5cdFx0XHR9ICk7XG5cblx0XHRcdHJlcXVlc3QuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVxdWVzdCA9IG51bGw7XG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXHRcdHVubG9hZF9mb3JtOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcztcblxuXHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCAnJyApO1xuXHRcdH0sXG5cdFx0aW5pdF9maWVsZHM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXM7XG5cblx0XHRcdGNvbnRyb2wuJGZpZWxkcyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcpO1xuXG5cdFx0XHQvLyB3aWxsIGluaXQgZmllbGRzXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGFjZi5kb0FjdGlvbigncmVhZHknLCBjb250cm9sLiR3cmFwcGVyKTtcblx0XHRcdFx0YWNmLmRvQWN0aW9uKCdwcmVwYXJlJyk7XG5cdFx0XHR9LDEpO1xuXHRcdH0sXG5cdFx0dXBkYXRlVmFsdWVzOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcyxcblx0XHRcdFx0JGlucHV0cyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGQgOmlucHV0JyksXG5cdFx0XHRcdHZhbHVlO1xuXG5cdFx0XHQvLyBjb252ZXJ0IG9iamVjdCB3aXRoIHByZWZpeGVkIG51bWVyaWMga2V5cyB0byBhcnJheVxuXHRcdFx0ZnVuY3Rpb24gZml4TnVtS2V5cyggb2JqICkge1xuXHRcdFx0XHRpZiAoICQuaXNQbGFpbk9iamVjdCggb2JqICkgKSB7XG5cdFx0XHRcdFx0Ly8gY29udmVydCBvYmplY3RzIHdpdGggbnVtZXJpYyBrZXlzIHRvIGFycmF5XG5cdFx0XHRcdFx0aWYgKCBPYmplY3Qua2V5cyggb2JqICkuam9pbignJykubWF0Y2goL14oWzAtOV9dKykkLykgKSB7XG5cdFx0XHRcdFx0XHRvYmogPSBPYmplY3QudmFsdWVzKCBvYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gcmVjdXJzZVxuXHRcdFx0XHRcdCQuZWFjaCggb2JqLGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHRcdFx0b2JqW2ldID0gZml4TnVtS2V5cyggZWwgKTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG9iajtcblx0XHRcdH1cblxuXHRcdFx0Ly8gcHJlZml4IG51bWVyaWMga2V5cyB3aXRoIGBfYFxuXHRcdFx0Ly8gcmVwZWF0ZXIgZmllbGQgbmFtZXMgaGF2ZSBudW1lcmljIGtleXMsIHdoaWNoIGdldCBhdXRvbWF0aWNhbGx5IHNvcnRlZCB1cG9uIHNlcmlhbGl6YXRpb24uXG5cdFx0XHQkaW5wdXRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIG5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTtcblxuXHRcdFx0XHRpZiAoICEgbmFtZSApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0JCh0aGlzKS5kYXRhKCdwcmV2LW5hbWUnLCBuYW1lICk7XG5cdFx0XHRcdCQodGhpcykuYXR0cignbmFtZScsbmFtZS5yZXBsYWNlKCAvXFxbKFswLTldKylcXF0vZywgJ1xcW18kMVxcXScpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YWx1ZSA9ICRpbnB1dHMuc2VyaWFsaXplSlNPTih7XG5cdFx0XHRcdHVzZUludEtleXNBc0FycmF5SW5kZXg6ZmFsc2UsXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gLi4uIHJlc3RvcmluZyBmaWVsZCBuYW1lcyB0byBwcmV2aW91cyBzdGF0ZVxuXHRcdFx0JGlucHV0cy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQodGhpcykuYXR0ciggJ25hbWUnLCAkKHRoaXMpLmRhdGEoJ3ByZXYtbmFtZScpICk7XG5cdFx0XHRcdCQodGhpcykuZGF0YSgncHJldi1uYW1lJywgbnVsbCApO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHVwZGF0ZSBjdXN0b21pZXIgdmFsdWVcblx0XHRcdGNvbnRyb2wuc2V0dGluZy5zZXQoIGZpeE51bUtleXMoIHZhbHVlW3RoaXMuaWQgXSApICk7XG5cdFx0fVxuXHR9KTtcblxuXHRhY2YuYWRkX2FjdGlvbigndmFsaWRhdGlvbl9zdWNjZXNzJywgZnVuY3Rpb24oZSkge1xuXHRcdGN1cnJlbnRfY29udHJvbC51cGRhdGVWYWx1ZXMoKTtcblx0fSk7XG5cdGFjZi5hZGRfYWN0aW9uKCd2YWxpZGF0aW9uX2ZhaWx1cmUnLGZ1bmN0aW9uKGUpe1xuXHRcdC8vIG5lZWQgdG8gcmVtb3ZlIGFjZiBtZXNzYWdlIGJlY2F1c2UgaXQgZGlzcGxheXMgYSB3cm9uZyBudW1iZXIgb2YgaW52YWxpZCBmaWVsZHNcblx0XHRjdXJyZW50X2NvbnRyb2wuY29udGFpbmVyLmZpbmQoJz4gLmFjZi1lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XG5cdH0pO1xuXHRhY2YuYWRkX2FjdGlvbignaW52YWxpZCcsIGZ1bmN0aW9uKCRpbnB1dCl7XG5cdFx0YWNmLnZhbGlkYXRpb24uYnVzeSA9IHRydWU7XG5cdH0pO1xuXG5cblxuXHRhcGkuYmluZCgncmVhZHknLGZ1bmN0aW9uKCl7XG5cdFx0YXBpLnByZXZpZXdlci5iaW5kKCAnYWNmLWN1c3RvbWl6ZS1jb250ZXh0JywgZnVuY3Rpb24oIG5ld192YWwgKSB7XG5cdFx0XHR2YXIgcHJldl92YWw7XG5cblx0XHRcdHByZXZfdmFsID0gYWNmX2N1c3RvbWl6ZV9jb250ZXh0XG5cdFx0XHRpZiAoIEpTT04uc3RyaW5naWZ5KG5ld192YWwpICE9IEpTT04uc3RyaW5naWZ5KHByZXZfdmFsKSApIHtcblx0XHRcdFx0YXBpLnRyaWdnZXIoICdhY2YtY3VzdG9taXplLWNvbnRleHQtY2hhbmdlZCcsIG5ld192YWwgKVxuXHRcdFx0fVxuXHRcdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0ID0gbmV3X3ZhbDtcblx0XHR9KTtcblx0fSk7XG5cblxuXHRhcGkuYmluZCggJ3NhdmUtcmVxdWVzdC1wYXJhbXMnLCBmdW5jdGlvbihxdWVyeSl7XG5cdFx0Xy5leHRlbmQoIHF1ZXJ5LCB7J2FjZl9jdXN0b21pemVfY29udGV4dCcgOiBKU09OLnN0cmluZ2lmeSggYWNmX2N1c3RvbWl6ZV9jb250ZXh0ICl9ICkgO1xuXHR9ICk7XG5cdC8vXG5cbiBcdGFwaS5jb250cm9sQ29uc3RydWN0b3JbJ2FjZl9jdXN0b21pemVyJ10gPSBhcGkuQWNmRmllbGRHcm91cENvbnRyb2w7XG5cblx0YXBpLmJpbmQoJ2NoYW5nZXNldC1lcnJvcicsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9jb25zb2xlLmxvZyhhcmd1bWVudHMpXG5cdH0pO1xuXG5cblxufSkoIHdwLmN1c3RvbWl6ZSwgalF1ZXJ5LCBhY2ZfZmllbGRncm91cF9jb250cm9sICk7XG4iXX0=

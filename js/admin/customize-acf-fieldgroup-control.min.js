!function(e,n,t){var a,o;e.AcfFieldGroupControl=e.Control.extend({preview_context:{type:null,id:null},initialize:function(t,i){var n;n=i||{},e.Control.prototype.initialize.call(this,t,n)},set_preview_context:function(t){return this.preview_context=t,this},ready:function(){var n=this;this.setting();0<=["post","term","user"].indexOf(n.params.storage_type)&&e.bind("acf-customize-context-changed",function(t){t.type===n.params.storage_type?n.set_preview_context(t).load_form():n.unload_form()}),this.$wrapper=n.container.find(".acf-fields").first(),acf.do_action("append",n.container),n.load_form(),n.container.on("change",".acf-field",function(t){var i=n.container.find(".acf-field :input");acf.validation.errors=[],i.each(function(){this.checkValidity()}),acf.validation.busy=!1,a=n,acf.validation.fetch({form:n.container,success:function(t){}})}),e.Control.prototype.ready.apply(n,arguments)},load_form:function(){var i=this;request=wp.ajax.send("load_customizer_field_groups_"+this.id,{data:{wp_customize:"on",section_id:this.id,acf_customize_context:JSON.stringify(i.preview_context),_nonce:t.load_field_group_nonce}}),request.done(function(t){i.$wrapper.html(t.html),i.$fields=i.container.find(".acf-fields > .acf-field"),i.init_fields()}),request.fail(function(t){}),request.always(function(){request=null})},unload_form:function(){this.$wrapper.html("")},init_fields:function(){acf.do_action("ready",this.$wrapper)},updateValues:function(){var t,i=this.container.find(".acf-field :input");i.each(function(){var t=n(this).attr("name");t&&(n(this).data("prev-name",t),n(this).attr("name",t.replace(/\[([0-9]+)\]/g,"[_$1]")))}),t=i.serializeJSON({useIntKeysAsArrayIndex:!1}),i.each(function(){n(this).attr("name",n(this).data("prev-name"))}),this.setting.set(t[this.id])}}),acf.add_action("validation_success",function(t){a.updateValues()}),acf.add_action("validation_failure",function(t){a.container.find("> .acf-error-message").remove()}),acf.add_action("invalid",function(t){acf.validation.busy=!0}),e.bind("ready",function(){e.previewer.bind("acf-customize-context",function(t){var i;i=o,JSON.stringify(t)!=JSON.stringify(i)&&e.trigger("acf-customize-context-changed",t),o=t})}),e.bind("save-request-params",function(t){console.log(o),_.extend(t,{acf_customize_context:JSON.stringify(o)})}),e.controlConstructor.acf_customizer=e.AcfFieldGroupControl,e.bind("changeset-error",function(){})}(wp.customize,jQuery,acf_fieldgroup_control);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLmpzIl0sIm5hbWVzIjpbImFwaSIsIiQiLCJvcHRpb25zIiwiY3VycmVudF9jb250cm9sIiwiYWNmX2N1c3RvbWl6ZV9jb250ZXh0IiwiQWNmRmllbGRHcm91cENvbnRyb2wiLCJDb250cm9sIiwiZXh0ZW5kIiwicHJldmlld19jb250ZXh0IiwidHlwZSIsImlkIiwiaW5pdGlhbGl6ZSIsIm9wdCIsImFyZ3MiLCJwcm90b3R5cGUiLCJjYWxsIiwidGhpcyIsInNldF9wcmV2aWV3X2NvbnRleHQiLCJjb250ZXh0IiwicmVhZHkiLCJjb250cm9sIiwic2V0dGluZyIsImluZGV4T2YiLCJwYXJhbXMiLCJzdG9yYWdlX3R5cGUiLCJiaW5kIiwibG9hZF9mb3JtIiwidW5sb2FkX2Zvcm0iLCIkd3JhcHBlciIsImNvbnRhaW5lciIsImZpbmQiLCJmaXJzdCIsImFjZiIsImRvX2FjdGlvbiIsIm9uIiwiZSIsIiRpbnB1dHMiLCJ2YWxpZGF0aW9uIiwiZXJyb3JzIiwiZWFjaCIsImNoZWNrVmFsaWRpdHkiLCJidXN5IiwiZmV0Y2giLCJmb3JtIiwic3VjY2VzcyIsIiRmb3JtIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJyZXF1ZXN0Iiwid3AiLCJhamF4Iiwic2VuZCIsImRhdGEiLCJ3cF9jdXN0b21pemUiLCJzZWN0aW9uX2lkIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9ub25jZSIsImxvYWRfZmllbGRfZ3JvdXBfbm9uY2UiLCJkb25lIiwicmVzcG9uc2UiLCJodG1sIiwiJGZpZWxkcyIsImluaXRfZmllbGRzIiwiZmFpbCIsImFsd2F5cyIsInVwZGF0ZVZhbHVlcyIsInZhbHVlIiwibmFtZSIsImF0dHIiLCJyZXBsYWNlIiwic2VyaWFsaXplSlNPTiIsInVzZUludEtleXNBc0FycmF5SW5kZXgiLCJzZXQiLCJhZGRfYWN0aW9uIiwicmVtb3ZlIiwiJGlucHV0IiwicHJldmlld2VyIiwibmV3X3ZhbCIsInByZXZfdmFsIiwidHJpZ2dlciIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsIl8iLCJjb250cm9sQ29uc3RydWN0b3IiLCJjdXN0b21pemUiLCJqUXVlcnkiLCJhY2ZfZmllbGRncm91cF9jb250cm9sIl0sIm1hcHBpbmdzIjoiQ0FDQSxTQUFXQSxFQUFLQyxFQUFHQyxHQUdsQixJQUFJQyxFQUNIQyxFQUVESixFQUFJSyxxQkFBdUJMLEVBQUlNLFFBQVFDLE9BQU8sQ0FDN0NDLGdCQUFpQixDQUNoQkMsS0FBTSxLQUNOQyxHQUFJLE1BRUxDLFdBQVksU0FBVUQsRUFBSUUsR0FDekIsSUFBb0JDLEVBRVhBLEVBQU9ELEdBQU8sR0FFdkJaLEVBQUlNLFFBQVFRLFVBQVVILFdBQVdJLEtBSm5CQyxLQUlrQ04sRUFBSUcsSUFHckRJLG9CQUFxQixTQUFTQyxHQUU3QixPQURBRixLQUFLUixnQkFBa0JVLEVBQ2hCRixNQUVSRyxNQUFPLFdBQ04sSUFBSUMsRUFBVUosS0FDRkEsS0FBS0ssVUFFWixHQUFLLENBQUMsT0FBTyxPQUFPLFFBQVFDLFFBQVNGLEVBQVFHLE9BQU9DLGVBRXhEeEIsRUFBSXlCLEtBQU0sZ0NBQWlDLFNBQVVQLEdBQy9DQSxFQUFRVCxPQUFTVyxFQUFRRyxPQUFPQyxhQUNwQ0osRUFDRUgsb0JBQXFCQyxHQUNyQlEsWUFFRk4sRUFBUU8sZ0JBTVhYLEtBQUtZLFNBQVdSLEVBQVFTLFVBQVVDLEtBQUssZUFBZUMsUUFDdERDLElBQUlDLFVBQVcsU0FBVWIsRUFBUVMsV0FFakNULEVBQVFNLFlBRVJOLEVBQVFTLFVBQVVLLEdBQUcsU0FBUyxhQUFjLFNBQVNDLEdBR3BELElBQUlDLEVBQVVoQixFQUFRUyxVQUFVQyxLQUFLLHFCQUVyQ0UsSUFBSUssV0FBV0MsT0FBUyxHQUN4QkYsRUFBUUcsS0FBSyxXQUNadkIsS0FBS3dCLGtCQUdOUixJQUFJSyxXQUFXSSxNQUFPLEVBQ3RCdEMsRUFBa0JpQixFQUNsQlksSUFBSUssV0FBV0ssTUFBTyxDQUNyQkMsS0FBTXZCLEVBQVFTLFVBQ2RlLFFBQVEsU0FBU0MsU0FhbkI3QyxFQUFJTSxRQUFRUSxVQUFVSyxNQUFNMkIsTUFBTzFCLEVBQVMyQixZQUU3Q3JCLFVBQVcsV0FFVixJQUFJTixFQUFVSixLQUVkZ0MsUUFBVUMsR0FBR0MsS0FBS0MsS0FBTSxnQ0FBZ0NuQyxLQUFLTixHQUFJLENBQ2hFMEMsS0FBTSxDQUNMQyxhQUFpQixLQUNqQkMsV0FBZ0J0QyxLQUFLTixHQUNyQk4sc0JBQXdCbUQsS0FBS0MsVUFBV3BDLEVBQVFaLGlCQUNoRGlELE9BQWF2RCxFQUFRd0QsMEJBSXZCVixRQUFRVyxLQUFNLFNBQVNDLEdBQ3RCeEMsRUFBUVEsU0FBU2lDLEtBQU1ELEVBQVNDLE1BQ2hDekMsRUFBUTBDLFFBQVUxQyxFQUFRUyxVQUFVQyxLQUFLLDRCQVN6Q1YsRUFBUTJDLGdCQU1UZixRQUFRZ0IsS0FBTSxTQUFVSixNQUd4QlosUUFBUWlCLE9BQVEsV0FDZmpCLFFBQVUsUUFJWnJCLFlBQWEsV0FDRVgsS0FDTlksU0FBU2lDLEtBQU0sS0FFeEJFLFlBQWEsV0FLWi9CLElBQUlDLFVBQVUsUUFIQWpCLEtBR2lCWSxXQUVoQ3NDLGFBQWMsV0FDYixJQUVDQyxFQURBL0IsRUFEYXBCLEtBQ0thLFVBQVVDLEtBQUsscUJBTWxDTSxFQUFRRyxLQUFLLFdBQ1osSUFBSTZCLEVBQU9uRSxFQUFFZSxNQUFNcUQsS0FBSyxRQUNqQkQsSUFHUG5FLEVBQUVlLE1BQU1vQyxLQUFLLFlBQWFnQixHQUMxQm5FLEVBQUVlLE1BQU1xRCxLQUFLLE9BQU9ELEVBQUtFLFFBQVEsZ0JBQWdCLGFBR2xESCxFQUFRL0IsRUFBUW1DLGNBQWMsQ0FDN0JDLHdCQUF1QixJQUl4QnBDLEVBQVFHLEtBQUssV0FDWnRDLEVBQUVlLE1BQU1xRCxLQUFNLE9BQVFwRSxFQUFFZSxNQUFNb0MsS0FBSyxnQkF0QnRCcEMsS0EwQk5LLFFBQVFvRCxJQUFLTixFQUFNbkQsS0FBS04sUUFJbENzQixJQUFJMEMsV0FBVyxxQkFBc0IsU0FBU3ZDLEdBQzdDaEMsRUFBZ0IrRCxpQkFFakJsQyxJQUFJMEMsV0FBVyxxQkFBcUIsU0FBU3ZDLEdBRTVDaEMsRUFBZ0IwQixVQUFVQyxLQUFLLHdCQUF3QjZDLFdBRXhEM0MsSUFBSTBDLFdBQVcsVUFBVyxTQUFTRSxHQUNsQzVDLElBQUlLLFdBQVdJLE1BQU8sSUFLdkJ6QyxFQUFJeUIsS0FBSyxRQUFRLFdBQ2hCekIsRUFBSTZFLFVBQVVwRCxLQUFNLHdCQUF5QixTQUFVcUQsR0FDdEQsSUFBSUMsRUFFSkEsRUFBVzNFLEVBQ05tRCxLQUFLQyxVQUFVc0IsSUFBWXZCLEtBQUtDLFVBQVV1QixJQUM5Qy9FLEVBQUlnRixRQUFTLGdDQUFpQ0YsR0FFL0MxRSxFQUF3QjBFLE1BSzFCOUUsRUFBSXlCLEtBQU0sc0JBQXVCLFNBQVN3RCxHQUN6Q0MsUUFBUUMsSUFBSS9FLEdBQ1pnRixFQUFFN0UsT0FBUTBFLEVBQU8sQ0FBQzdFLHNCQUEwQm1ELEtBQUtDLFVBQVdwRCxPQUk1REosRUFBSXFGLG1CQUFtQyxlQUFJckYsRUFBSUsscUJBRWhETCxFQUFJeUIsS0FBSyxrQkFBbUIsY0E3TDdCLENBa01Jd0IsR0FBR3FDLFVBQVdDLE9BQVFDIiwiZmlsZSI6ImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uKCBhcGksICQsIG9wdGlvbnMgKSB7XG5cblx0Ly8gc3RvcmUgZm9yIGFjZidzIHN0YXRpYyB2YWxpZGF0aW9uIGNhbGxiYWNrc1xuXHR2YXIgY3VycmVudF9jb250cm9sLFxuXHRcdGFjZl9jdXN0b21pemVfY29udGV4dDtcblxuXHRhcGkuQWNmRmllbGRHcm91cENvbnRyb2wgPSBhcGkuQ29udHJvbC5leHRlbmQoe1xuXHRcdHByZXZpZXdfY29udGV4dDoge1xuXHRcdFx0dHlwZTogbnVsbCxcblx0XHRcdGlkOiBudWxsLFxuXHRcdH0sXG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oIGlkLCBvcHQgKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsIGFyZ3M7XG5cbiAgICAgICAgICAgIGFyZ3MgPSBvcHQgfHwge307XG5cblx0XHRcdGFwaS5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwoIGNvbnRyb2wsIGlkLCBhcmdzICk7XG5cblx0XHR9LFxuXHRcdHNldF9wcmV2aWV3X2NvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHtcblx0XHRcdHRoaXMucHJldmlld19jb250ZXh0ID0gY29udGV4dDtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0cmVhZHk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHRzZXR0aW5ncyA9IHRoaXMuc2V0dGluZygpO1xuXG5cdFx0XHRpZiAoIDAgPD0gWydwb3N0JywndGVybScsJ3VzZXInXS5pbmRleE9mKCBjb250cm9sLnBhcmFtcy5zdG9yYWdlX3R5cGUgKSApIHtcblx0XHRcdFx0Ly8gcmVsb2FkIGZpZWxkcyBpZiBwcmV2aWV3IHVybCBjaGFuZ2VkXG5cdFx0XHRcdGFwaS5iaW5kKCAnYWNmLWN1c3RvbWl6ZS1jb250ZXh0LWNoYW5nZWQnLCBmdW5jdGlvbiggY29udGV4dCApIHtcblx0XHRcdFx0XHRpZiAoIGNvbnRleHQudHlwZSA9PT0gY29udHJvbC5wYXJhbXMuc3RvcmFnZV90eXBlICkge1xuXHRcdFx0XHRcdFx0Y29udHJvbFxuXHRcdFx0XHRcdFx0XHQuc2V0X3ByZXZpZXdfY29udGV4dCggY29udGV4dCApXG5cdFx0XHRcdFx0XHRcdC5sb2FkX2Zvcm0oKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udHJvbC51bmxvYWRfZm9ybSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuJHdyYXBwZXIgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkcycpLmZpcnN0KCk7XG5cdFx0XHRhY2YuZG9fYWN0aW9uKCAnYXBwZW5kJywgY29udHJvbC5jb250YWluZXIgKTtcblxuXHRcdFx0Y29udHJvbC5sb2FkX2Zvcm0oKTtcblxuXHRcdFx0Y29udHJvbC5jb250YWluZXIub24oJ2NoYW5nZScsJy5hY2YtZmllbGQnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0Ly8qXG5cdFx0XHRcdC8vIGNoZWNrIHZhbGlkXG5cdFx0XHRcdHZhciAkaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKTtcblxuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5lcnJvcnMgPSBbXTtcblx0XHRcdFx0JGlucHV0cy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dGhpcy5jaGVja1ZhbGlkaXR5KCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmJ1c3kgPSBmYWxzZTtcblx0XHRcdFx0Y3VycmVudF9jb250cm9sID0gY29udHJvbDtcblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uZmV0Y2goIHtcblx0XHRcdFx0XHRmb3JtOiBjb250cm9sLmNvbnRhaW5lcixcblx0XHRcdFx0XHRzdWNjZXNzOmZ1bmN0aW9uKCRmb3JtKSB7XG5cdFx0XHRcdFx0XHQvLyBhbGxvdyBmb3Igc3VibWl0XG5cdFx0XHRcdFx0XHQvLyBhY2YudmFsaWRhdGlvbi5pZ25vcmUgPSAxO1xuXHRcdFx0XHRcdFx0Ly8gJGJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0fSApO1xuXHRcdFx0XHQvKi9cblx0XHRcdFx0Y29uc29sZS5sb2coJ2NoYW5nZScsY29udHJvbC4kaW5wdXRzLnNlcmlhbGl6ZUpTT04oKSlcblx0XHRcdFx0Y29udHJvbC5zZXR0aW5nLnNldCggY29udHJvbC4kaW5wdXRzLnNlcmlhbGl6ZUpTT04oKSApO1xuXHRcdFx0XHQvLyovXG5cdFx0XHR9KTtcblxuXHRcdFx0YXBpLkNvbnRyb2wucHJvdG90eXBlLnJlYWR5LmFwcGx5KCBjb250cm9sLCBhcmd1bWVudHMgKTtcblx0XHR9LFxuXHRcdGxvYWRfZm9ybTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBjb250cm9sID0gdGhpcztcblxuXHRcdFx0cmVxdWVzdCA9IHdwLmFqYXguc2VuZCggJ2xvYWRfY3VzdG9taXplcl9maWVsZF9ncm91cHNfJyt0aGlzLmlkLCB7XG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHR3cF9jdXN0b21pemVcdFx0XHQ6ICdvbicsXG5cdFx0XHRcdFx0c2VjdGlvbl9pZFx0XHRcdFx0OiB0aGlzLmlkLFxuXHRcdFx0XHRcdGFjZl9jdXN0b21pemVfY29udGV4dFx0OiBKU09OLnN0cmluZ2lmeSggY29udHJvbC5wcmV2aWV3X2NvbnRleHQgKSxcblx0XHRcdFx0XHRfbm9uY2VcdFx0XHRcdFx0OiBvcHRpb25zLmxvYWRfZmllbGRfZ3JvdXBfbm9uY2UsXG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdFx0cmVxdWVzdC5kb25lKCBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRjb250cm9sLiR3cmFwcGVyLmh0bWwoIHJlc3BvbnNlLmh0bWwgKTtcblx0XHRcdFx0Y29udHJvbC4kZmllbGRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyk7XG5cdFx0XHRcdC8vIGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGRzIFtpZF0nKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdC8vIFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpLFxuXHRcdFx0XHQvLyBcdFx0bmV3X2lkID0gY29udHJvbC5pZCArIGlkO1xuXHRcdFx0XHQvLyBcdCQodGhpcykuYXR0cignaWQnLCBuZXdfaWQgKTtcblx0XHRcdFx0Ly8gXHRjb250cm9sLmNvbnRhaW5lci5maW5kKCdbZm9yPVwiJytpZCsnXCJdJykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQvLyBcdFx0JCh0aGlzKS5hdHRyKCdmb3InLCBuZXdfaWQgKTtcblx0XHRcdFx0Ly8gXHR9KTtcblx0XHRcdFx0Ly8gfSk7XG5cdFx0XHRcdGNvbnRyb2wuaW5pdF9maWVsZHMoKTtcblx0XHRcdFx0Lypcblx0XHRcdFx0Y29udHJvbC4kaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKTtcblx0XHRcdFx0Ki9cblx0XHRcdH0gKTtcblxuXHRcdFx0cmVxdWVzdC5mYWlsKCBmdW5jdGlvbiggcmVzcG9uc2UgKSB7XG5cdFx0XHR9ICk7XG5cblx0XHRcdHJlcXVlc3QuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVxdWVzdCA9IG51bGw7XG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXHRcdHVubG9hZF9mb3JtOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcztcblx0XHRcdGNvbnRyb2wuJHdyYXBwZXIuaHRtbCggJycgKTtcblx0XHR9LFxuXHRcdGluaXRfZmllbGRzOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzO1xuXG5cdFx0XHQvLyB3aWxsIGluaXQgZmllbGRzXG5cdFx0XHRhY2YuZG9fYWN0aW9uKCdyZWFkeScsIGNvbnRyb2wuJHdyYXBwZXIpO1xuXHRcdH0sXG5cdFx0dXBkYXRlVmFsdWVzOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcyxcblx0XHRcdFx0JGlucHV0cyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGQgOmlucHV0JyksXG5cdFx0XHRcdHZhbHVlO1xuXG5cdFx0XHQvLyBwcmVmaXhpbmcgbnVtZXJpYyBrZXlzIHdpdGggYSBgX2Bcblx0XHRcdC8vIHJlcGVhdGVyIGZpZWxkIG5hbWVzIGhhdmUgbnVtZXJpYyBrZXlzLCB3aGljaCBnZXQgY2FzdGVkIHRvIGludCB1cG9uIHNlcmlhbGl6YXRpb24uXG5cdFx0XHQvLyBBcyBhIHJlc3VsdCB0aGUgc29ydGluZyBpbmZvcm1hdGlvbiBpcyBsb3N0IC4uLlxuXHRcdFx0JGlucHV0cy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciBuYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7XG5cdFx0XHRcdGlmICggISBuYW1lICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHQkKHRoaXMpLmRhdGEoJ3ByZXYtbmFtZScsIG5hbWUgKTtcblx0XHRcdFx0JCh0aGlzKS5hdHRyKCduYW1lJyxuYW1lLnJlcGxhY2UoL1xcWyhbMC05XSspXFxdL2csJ1xcW18kMVxcXScpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YWx1ZSA9ICRpbnB1dHMuc2VyaWFsaXplSlNPTih7XG5cdFx0XHRcdHVzZUludEtleXNBc0FycmF5SW5kZXg6ZmFsc2Vcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyAuLi4gcmVzdG9yaW5nIGZpZWxkIG5hbWVzIHRvIHByZXZpb3VzIHN0YXRlXG5cdFx0XHQkaW5wdXRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0JCh0aGlzKS5hdHRyKCAnbmFtZScsICQodGhpcykuZGF0YSgncHJldi1uYW1lJykgKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyB1cGRhdGUgdmFsdWVzLlxuXHRcdFx0Y29udHJvbC5zZXR0aW5nLnNldCggdmFsdWVbdGhpcy5pZF0gKTtcblx0XHR9XG5cdH0pO1xuXG5cdGFjZi5hZGRfYWN0aW9uKCd2YWxpZGF0aW9uX3N1Y2Nlc3MnLCBmdW5jdGlvbihlKSB7XG5cdFx0Y3VycmVudF9jb250cm9sLnVwZGF0ZVZhbHVlcygpO1xuXHR9KTtcblx0YWNmLmFkZF9hY3Rpb24oJ3ZhbGlkYXRpb25fZmFpbHVyZScsZnVuY3Rpb24oZSl7XG5cdFx0Ly8gbmVlZCB0byByZW1vdmUgYWNmIG1lc3NhZ2UgYmVjYXVzZSBpdCBkaXNwbGF5cyBhIHdyb25nIG51bWJlciBvZiBpbnZhbGlkIGZpZWxkc1xuXHRcdGN1cnJlbnRfY29udHJvbC5jb250YWluZXIuZmluZCgnPiAuYWNmLWVycm9yLW1lc3NhZ2UnKS5yZW1vdmUoKTtcblx0fSk7XG5cdGFjZi5hZGRfYWN0aW9uKCdpbnZhbGlkJywgZnVuY3Rpb24oJGlucHV0KXtcblx0XHRhY2YudmFsaWRhdGlvbi5idXN5ID0gdHJ1ZTtcblx0fSk7XG5cblxuXG5cdGFwaS5iaW5kKCdyZWFkeScsZnVuY3Rpb24oKXtcblx0XHRhcGkucHJldmlld2VyLmJpbmQoICdhY2YtY3VzdG9taXplLWNvbnRleHQnLCBmdW5jdGlvbiggbmV3X3ZhbCApIHtcblx0XHRcdHZhciBwcmV2X3ZhbDtcblxuXHRcdFx0cHJldl92YWwgPSBhY2ZfY3VzdG9taXplX2NvbnRleHRcblx0XHRcdGlmICggSlNPTi5zdHJpbmdpZnkobmV3X3ZhbCkgIT0gSlNPTi5zdHJpbmdpZnkocHJldl92YWwpICkge1xuXHRcdFx0XHRhcGkudHJpZ2dlciggJ2FjZi1jdXN0b21pemUtY29udGV4dC1jaGFuZ2VkJywgbmV3X3ZhbCApXG5cdFx0XHR9XG5cdFx0XHRhY2ZfY3VzdG9taXplX2NvbnRleHQgPSBuZXdfdmFsO1xuXHRcdH0pO1xuXHR9KTtcblxuXG5cdGFwaS5iaW5kKCAnc2F2ZS1yZXF1ZXN0LXBhcmFtcycsIGZ1bmN0aW9uKHF1ZXJ5KXtcblx0XHRjb25zb2xlLmxvZyhhY2ZfY3VzdG9taXplX2NvbnRleHQpXG5cdFx0Xy5leHRlbmQoIHF1ZXJ5LCB7J2FjZl9jdXN0b21pemVfY29udGV4dCcgOiBKU09OLnN0cmluZ2lmeSggYWNmX2N1c3RvbWl6ZV9jb250ZXh0ICl9ICkgO1xuXHR9ICk7XG5cdC8vXG5cbiBcdGFwaS5jb250cm9sQ29uc3RydWN0b3JbJ2FjZl9jdXN0b21pemVyJ10gPSBhcGkuQWNmRmllbGRHcm91cENvbnRyb2w7XG5cblx0YXBpLmJpbmQoJ2NoYW5nZXNldC1lcnJvcicsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9jb25zb2xlLmxvZyhhcmd1bWVudHMpXG5cdH0pO1xuXG5cbn0pKCB3cC5jdXN0b21pemUsIGpRdWVyeSwgYWNmX2ZpZWxkZ3JvdXBfY29udHJvbCApO1xuIl19

!function(e,n,t){var a,o;e.AcfFieldGroupControl=e.Control.extend({preview_context:{type:null,id:null},initialize:function(t,i){var n;n=i||{},e.Control.prototype.initialize.call(this,t,n)},set_preview_context:function(t){return this.preview_context=t,this},ready:function(){var n=this;this.setting();0<=["post","term","user"].indexOf(n.params.storage_type)&&e.bind("acf-customize-context-changed",function(t){t.type===n.params.storage_type?n.set_preview_context(t).load_form():n.unload_form()}),this.$wrapper=n.container.find(".acf-fields").first(),acf.do_action("append",n.container),n.load_form(),n.container.on("change",".acf-field",function(t){var i=n.container.find(".acf-field :input");acf.validation.errors=[],i.each(function(){this.checkValidity()}),acf.validation.busy=!1,a=n,acf.validation.fetch(n.container)}),e.Control.prototype.ready.apply(n,arguments)},load_form:function(){var i=this;request=wp.ajax.send("load_customizer_field_groups_"+this.id,{data:{wp_customize:"on",section_id:this.id,acf_customize_context:JSON.stringify(i.preview_context),_nonce:t.load_field_group_nonce}}),request.done(function(t){i.$wrapper.html(t.html),i.$fields=i.container.find(".acf-fields > .acf-field"),i.init_fields()}),request.fail(function(t){}),request.always(function(){request=null})},unload_form:function(){this.$wrapper.html("")},init_fields:function(){acf.do_action("ready",this.$wrapper)},updateValues:function(){var t,i=this.container.find(".acf-field :input");i.each(function(){var t=n(this).attr("name");t&&(n(this).data("prev-name",t),n(this).attr("name",t.replace(/\[([0-9]+)\]/g,"[_$1]")))}),t=i.serializeJSON({useIntKeysAsArrayIndex:!1}),i.each(function(){n(this).attr("name",n(this).data("prev-name"))}),this.setting.set(t[this.id])}}),acf.add_action("validation_success",function(t){a.updateValues()}),acf.add_action("validation_failure",function(t){a.container.find("> .acf-error-message").remove()}),acf.add_action("invalid",function(t){acf.validation.busy=!0}),e.bind("ready",function(){e.previewer.bind("acf-customize-context",function(t){var i;i=o,JSON.stringify(t)!=JSON.stringify(i)&&e.trigger("acf-customize-context-changed",t),o=t})}),e.bind("save-request-params",function(t){console.log(o),_.extend(t,{acf_customize_context:JSON.stringify(o)})}),e.controlConstructor.acf_customizer=e.AcfFieldGroupControl,e.bind("changeset-error",function(){})}(wp.customize,jQuery,acf_fieldgroup_control);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLmpzIl0sIm5hbWVzIjpbImFwaSIsIiQiLCJvcHRpb25zIiwiY3VycmVudF9jb250cm9sIiwiYWNmX2N1c3RvbWl6ZV9jb250ZXh0IiwiQWNmRmllbGRHcm91cENvbnRyb2wiLCJDb250cm9sIiwiZXh0ZW5kIiwicHJldmlld19jb250ZXh0IiwidHlwZSIsImlkIiwiaW5pdGlhbGl6ZSIsIm9wdCIsImFyZ3MiLCJwcm90b3R5cGUiLCJjYWxsIiwidGhpcyIsInNldF9wcmV2aWV3X2NvbnRleHQiLCJjb250ZXh0IiwicmVhZHkiLCJjb250cm9sIiwic2V0dGluZyIsImluZGV4T2YiLCJwYXJhbXMiLCJzdG9yYWdlX3R5cGUiLCJiaW5kIiwibG9hZF9mb3JtIiwidW5sb2FkX2Zvcm0iLCIkd3JhcHBlciIsImNvbnRhaW5lciIsImZpbmQiLCJmaXJzdCIsImFjZiIsImRvX2FjdGlvbiIsIm9uIiwiZSIsIiRpbnB1dHMiLCJ2YWxpZGF0aW9uIiwiZXJyb3JzIiwiZWFjaCIsImNoZWNrVmFsaWRpdHkiLCJidXN5IiwiZmV0Y2giLCJhcHBseSIsImFyZ3VtZW50cyIsInJlcXVlc3QiLCJ3cCIsImFqYXgiLCJzZW5kIiwiZGF0YSIsIndwX2N1c3RvbWl6ZSIsInNlY3Rpb25faWQiLCJKU09OIiwic3RyaW5naWZ5IiwiX25vbmNlIiwibG9hZF9maWVsZF9ncm91cF9ub25jZSIsImRvbmUiLCJyZXNwb25zZSIsImh0bWwiLCIkZmllbGRzIiwiaW5pdF9maWVsZHMiLCJmYWlsIiwiYWx3YXlzIiwidXBkYXRlVmFsdWVzIiwidmFsdWUiLCJuYW1lIiwiYXR0ciIsInJlcGxhY2UiLCJzZXJpYWxpemVKU09OIiwidXNlSW50S2V5c0FzQXJyYXlJbmRleCIsInNldCIsImFkZF9hY3Rpb24iLCJyZW1vdmUiLCIkaW5wdXQiLCJwcmV2aWV3ZXIiLCJuZXdfdmFsIiwicHJldl92YWwiLCJ0cmlnZ2VyIiwicXVlcnkiLCJjb25zb2xlIiwibG9nIiwiXyIsImNvbnRyb2xDb25zdHJ1Y3RvciIsImN1c3RvbWl6ZSIsImpRdWVyeSIsImFjZl9maWVsZGdyb3VwX2NvbnRyb2wiXSwibWFwcGluZ3MiOiJDQUNBLFNBQVdBLEVBQUtDLEVBQUdDLEdBR2xCLElBQUlDLEVBQ0hDLEVBRURKLEVBQUlLLHFCQUF1QkwsRUFBSU0sUUFBUUMsT0FBTyxDQUM3Q0MsZ0JBQWlCLENBQ2hCQyxLQUFNLEtBQ05DLEdBQUksTUFFTEMsV0FBWSxTQUFVRCxFQUFJRSxHQUN6QixJQUFvQkMsRUFFWEEsRUFBT0QsR0FBTyxHQUV2QlosRUFBSU0sUUFBUVEsVUFBVUgsV0FBV0ksS0FKbkJDLEtBSWtDTixFQUFJRyxJQUdyREksb0JBQXFCLFNBQVNDLEdBRTdCLE9BREFGLEtBQUtSLGdCQUFrQlUsRUFDaEJGLE1BRVJHLE1BQU8sV0FDTixJQUFJQyxFQUFVSixLQUNGQSxLQUFLSyxVQUVaLEdBQUssQ0FBQyxPQUFPLE9BQU8sUUFBUUMsUUFBU0YsRUFBUUcsT0FBT0MsZUFFeER4QixFQUFJeUIsS0FBTSxnQ0FBaUMsU0FBVVAsR0FDL0NBLEVBQVFULE9BQVNXLEVBQVFHLE9BQU9DLGFBQ3BDSixFQUNFSCxvQkFBcUJDLEdBQ3JCUSxZQUVGTixFQUFRTyxnQkFNWFgsS0FBS1ksU0FBV1IsRUFBUVMsVUFBVUMsS0FBSyxlQUFlQyxRQUN0REMsSUFBSUMsVUFBVyxTQUFVYixFQUFRUyxXQUVqQ1QsRUFBUU0sWUFFUk4sRUFBUVMsVUFBVUssR0FBRyxTQUFTLGFBQWMsU0FBU0MsR0FHcEQsSUFBSUMsRUFBVWhCLEVBQVFTLFVBQVVDLEtBQUsscUJBRXJDRSxJQUFJSyxXQUFXQyxPQUFTLEdBQ3hCRixFQUFRRyxLQUFLLFdBQ1p2QixLQUFLd0Isa0JBR05SLElBQUlLLFdBQVdJLE1BQU8sRUFDdEJ0QyxFQUFrQmlCLEVBQ2xCWSxJQUFJSyxXQUFXSyxNQUFPdEIsRUFBUVMsYUFPL0I3QixFQUFJTSxRQUFRUSxVQUFVSyxNQUFNd0IsTUFBT3ZCLEVBQVN3QixZQUU3Q2xCLFVBQVcsV0FFVixJQUFJTixFQUFVSixLQUVkNkIsUUFBVUMsR0FBR0MsS0FBS0MsS0FBTSxnQ0FBZ0NoQyxLQUFLTixHQUFJLENBQ2hFdUMsS0FBTSxDQUNMQyxhQUFpQixLQUNqQkMsV0FBZ0JuQyxLQUFLTixHQUNyQk4sc0JBQXdCZ0QsS0FBS0MsVUFBV2pDLEVBQVFaLGlCQUNoRDhDLE9BQWFwRCxFQUFRcUQsMEJBSXZCVixRQUFRVyxLQUFNLFNBQVNDLEdBQ3RCckMsRUFBUVEsU0FBUzhCLEtBQU1ELEVBQVNDLE1BQ2hDdEMsRUFBUXVDLFFBQVV2QyxFQUFRUyxVQUFVQyxLQUFLLDRCQVN6Q1YsRUFBUXdDLGdCQU1UZixRQUFRZ0IsS0FBTSxTQUFVSixNQUd4QlosUUFBUWlCLE9BQVEsV0FDZmpCLFFBQVUsUUFJWmxCLFlBQWEsV0FDRVgsS0FDTlksU0FBUzhCLEtBQU0sS0FFeEJFLFlBQWEsV0FLWjVCLElBQUlDLFVBQVUsUUFIQWpCLEtBR2lCWSxXQUVoQ21DLGFBQWMsV0FDYixJQUVDQyxFQURBNUIsRUFEYXBCLEtBQ0thLFVBQVVDLEtBQUsscUJBTWxDTSxFQUFRRyxLQUFLLFdBQ1osSUFBSTBCLEVBQU9oRSxFQUFFZSxNQUFNa0QsS0FBSyxRQUNqQkQsSUFHUGhFLEVBQUVlLE1BQU1pQyxLQUFLLFlBQWFnQixHQUMxQmhFLEVBQUVlLE1BQU1rRCxLQUFLLE9BQU9ELEVBQUtFLFFBQVEsZ0JBQWdCLGFBR2xESCxFQUFRNUIsRUFBUWdDLGNBQWMsQ0FDN0JDLHdCQUF1QixJQUl4QmpDLEVBQVFHLEtBQUssV0FDWnRDLEVBQUVlLE1BQU1rRCxLQUFNLE9BQVFqRSxFQUFFZSxNQUFNaUMsS0FBSyxnQkF0QnRCakMsS0EwQk5LLFFBQVFpRCxJQUFLTixFQUFNaEQsS0FBS04sUUFJbENzQixJQUFJdUMsV0FBVyxxQkFBc0IsU0FBU3BDLEdBQzdDaEMsRUFBZ0I0RCxpQkFFakIvQixJQUFJdUMsV0FBVyxxQkFBcUIsU0FBU3BDLEdBRTVDaEMsRUFBZ0IwQixVQUFVQyxLQUFLLHdCQUF3QjBDLFdBRXhEeEMsSUFBSXVDLFdBQVcsVUFBVyxTQUFTRSxHQUNsQ3pDLElBQUlLLFdBQVdJLE1BQU8sSUFLdkJ6QyxFQUFJeUIsS0FBSyxRQUFRLFdBQ2hCekIsRUFBSTBFLFVBQVVqRCxLQUFNLHdCQUF5QixTQUFVa0QsR0FDdEQsSUFBSUMsRUFFSkEsRUFBV3hFLEVBQ05nRCxLQUFLQyxVQUFVc0IsSUFBWXZCLEtBQUtDLFVBQVV1QixJQUM5QzVFLEVBQUk2RSxRQUFTLGdDQUFpQ0YsR0FFL0N2RSxFQUF3QnVFLE1BSzFCM0UsRUFBSXlCLEtBQU0sc0JBQXVCLFNBQVNxRCxHQUN6Q0MsUUFBUUMsSUFBSTVFLEdBQ1o2RSxFQUFFMUUsT0FBUXVFLEVBQU8sQ0FBQzFFLHNCQUEwQmdELEtBQUtDLFVBQVdqRCxPQUk1REosRUFBSWtGLG1CQUFtQyxlQUFJbEYsRUFBSUsscUJBRWhETCxFQUFJeUIsS0FBSyxrQkFBbUIsY0FyTDdCLENBMExJcUIsR0FBR3FDLFVBQVdDLE9BQVFDIiwiZmlsZSI6ImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uKCBhcGksICQsIG9wdGlvbnMgKSB7XG5cblx0Ly8gc3RvcmUgZm9yIGFjZidzIHN0YXRpYyB2YWxpZGF0aW9uIGNhbGxiYWNrc1xuXHR2YXIgY3VycmVudF9jb250cm9sLFxuXHRcdGFjZl9jdXN0b21pemVfY29udGV4dDtcblxuXHRhcGkuQWNmRmllbGRHcm91cENvbnRyb2wgPSBhcGkuQ29udHJvbC5leHRlbmQoe1xuXHRcdHByZXZpZXdfY29udGV4dDoge1xuXHRcdFx0dHlwZTogbnVsbCxcblx0XHRcdGlkOiBudWxsLFxuXHRcdH0sXG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oIGlkLCBvcHQgKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsIGFyZ3M7XG5cbiAgICAgICAgICAgIGFyZ3MgPSBvcHQgfHwge307XG5cblx0XHRcdGFwaS5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwoIGNvbnRyb2wsIGlkLCBhcmdzICk7XG5cblx0XHR9LFxuXHRcdHNldF9wcmV2aWV3X2NvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHtcblx0XHRcdHRoaXMucHJldmlld19jb250ZXh0ID0gY29udGV4dDtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0cmVhZHk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHRzZXR0aW5ncyA9IHRoaXMuc2V0dGluZygpO1xuXG5cdFx0XHRpZiAoIDAgPD0gWydwb3N0JywndGVybScsJ3VzZXInXS5pbmRleE9mKCBjb250cm9sLnBhcmFtcy5zdG9yYWdlX3R5cGUgKSApIHtcblx0XHRcdFx0Ly8gcmVsb2FkIGZpZWxkcyBpZiBwcmV2aWV3IHVybCBjaGFuZ2VkXG5cdFx0XHRcdGFwaS5iaW5kKCAnYWNmLWN1c3RvbWl6ZS1jb250ZXh0LWNoYW5nZWQnLCBmdW5jdGlvbiggY29udGV4dCApIHtcblx0XHRcdFx0XHRpZiAoIGNvbnRleHQudHlwZSA9PT0gY29udHJvbC5wYXJhbXMuc3RvcmFnZV90eXBlICkge1xuXHRcdFx0XHRcdFx0Y29udHJvbFxuXHRcdFx0XHRcdFx0XHQuc2V0X3ByZXZpZXdfY29udGV4dCggY29udGV4dCApXG5cdFx0XHRcdFx0XHRcdC5sb2FkX2Zvcm0oKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udHJvbC51bmxvYWRfZm9ybSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuJHdyYXBwZXIgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkcycpLmZpcnN0KCk7XG5cdFx0XHRhY2YuZG9fYWN0aW9uKCAnYXBwZW5kJywgY29udHJvbC5jb250YWluZXIgKTtcblxuXHRcdFx0Y29udHJvbC5sb2FkX2Zvcm0oKTtcblxuXHRcdFx0Y29udHJvbC5jb250YWluZXIub24oJ2NoYW5nZScsJy5hY2YtZmllbGQnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0Ly8qXG5cdFx0XHRcdC8vIGNoZWNrIHZhbGlkXG5cdFx0XHRcdHZhciAkaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKTtcblxuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5lcnJvcnMgPSBbXTtcblx0XHRcdFx0JGlucHV0cy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dGhpcy5jaGVja1ZhbGlkaXR5KCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmJ1c3kgPSBmYWxzZTtcblx0XHRcdFx0Y3VycmVudF9jb250cm9sID0gY29udHJvbDtcblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uZmV0Y2goIGNvbnRyb2wuY29udGFpbmVyICk7XG5cdFx0XHRcdC8qL1xuXHRcdFx0XHRjb25zb2xlLmxvZygnY2hhbmdlJyxjb250cm9sLiRpbnB1dHMuc2VyaWFsaXplSlNPTigpKVxuXHRcdFx0XHRjb250cm9sLnNldHRpbmcuc2V0KCBjb250cm9sLiRpbnB1dHMuc2VyaWFsaXplSlNPTigpICk7XG5cdFx0XHRcdC8vKi9cblx0XHRcdH0pO1xuXG5cdFx0XHRhcGkuQ29udHJvbC5wcm90b3R5cGUucmVhZHkuYXBwbHkoIGNvbnRyb2wsIGFyZ3VtZW50cyApO1xuXHRcdH0sXG5cdFx0bG9hZF9mb3JtOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzO1xuXG5cdFx0XHRyZXF1ZXN0ID0gd3AuYWpheC5zZW5kKCAnbG9hZF9jdXN0b21pemVyX2ZpZWxkX2dyb3Vwc18nK3RoaXMuaWQsIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHdwX2N1c3RvbWl6ZVx0XHRcdDogJ29uJyxcblx0XHRcdFx0XHRzZWN0aW9uX2lkXHRcdFx0XHQ6IHRoaXMuaWQsXG5cdFx0XHRcdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0XHQ6IEpTT04uc3RyaW5naWZ5KCBjb250cm9sLnByZXZpZXdfY29udGV4dCApLFxuXHRcdFx0XHRcdF9ub25jZVx0XHRcdFx0XHQ6IG9wdGlvbnMubG9hZF9maWVsZF9ncm91cF9ub25jZSxcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXF1ZXN0LmRvbmUoIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdGNvbnRyb2wuJHdyYXBwZXIuaHRtbCggcmVzcG9uc2UuaHRtbCApO1xuXHRcdFx0XHRjb250cm9sLiRmaWVsZHMgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnKTtcblx0XHRcdFx0Ly8gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZHMgW2lkXScpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0Ly8gXHR2YXIgaWQgPSAkKHRoaXMpLmF0dHIoJ2lkJyksXG5cdFx0XHRcdC8vIFx0XHRuZXdfaWQgPSBjb250cm9sLmlkICsgaWQ7XG5cdFx0XHRcdC8vIFx0JCh0aGlzKS5hdHRyKCdpZCcsIG5ld19pZCApO1xuXHRcdFx0XHQvLyBcdGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJ1tmb3I9XCInK2lkKydcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdC8vIFx0XHQkKHRoaXMpLmF0dHIoJ2ZvcicsIG5ld19pZCApO1xuXHRcdFx0XHQvLyBcdH0pO1xuXHRcdFx0XHQvLyB9KTtcblx0XHRcdFx0Y29udHJvbC5pbml0X2ZpZWxkcygpO1xuXHRcdFx0XHQvKlxuXHRcdFx0XHRjb250cm9sLiRpbnB1dHMgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkIDppbnB1dCcpO1xuXHRcdFx0XHQqL1xuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXF1ZXN0LmZhaWwoIGZ1bmN0aW9uKCByZXNwb25zZSApIHtcblx0XHRcdH0gKTtcblxuXHRcdFx0cmVxdWVzdC5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXF1ZXN0ID0gbnVsbDtcblx0XHRcdH0gKTtcblxuXHRcdH0sXG5cdFx0dW5sb2FkX2Zvcm06IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzO1xuXHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCAnJyApO1xuXHRcdH0sXG5cdFx0aW5pdF9maWVsZHM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXM7XG5cblx0XHRcdC8vIHdpbGwgaW5pdCBmaWVsZHNcblx0XHRcdGFjZi5kb19hY3Rpb24oJ3JlYWR5JywgY29udHJvbC4kd3JhcHBlcik7XG5cdFx0fSxcblx0XHR1cGRhdGVWYWx1ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHQkaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKSxcblx0XHRcdFx0dmFsdWU7XG5cblx0XHRcdC8vIHByZWZpeGluZyBudW1lcmljIGtleXMgd2l0aCBhIGBfYFxuXHRcdFx0Ly8gcmVwZWF0ZXIgZmllbGQgbmFtZXMgaGF2ZSBudW1lcmljIGtleXMsIHdoaWNoIGdldCBjYXN0ZWQgdG8gaW50IHVwb24gc2VyaWFsaXphdGlvbi5cblx0XHRcdC8vIEFzIGEgcmVzdWx0IHRoZSBzb3J0aW5nIGluZm9ybWF0aW9uIGlzIGxvc3QgLi4uXG5cdFx0XHQkaW5wdXRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIG5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTtcblx0XHRcdFx0aWYgKCAhIG5hbWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQodGhpcykuZGF0YSgncHJldi1uYW1lJywgbmFtZSApO1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoJ25hbWUnLG5hbWUucmVwbGFjZSgvXFxbKFswLTldKylcXF0vZywnXFxbXyQxXFxdJykpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHZhbHVlID0gJGlucHV0cy5zZXJpYWxpemVKU09OKHtcblx0XHRcdFx0dXNlSW50S2V5c0FzQXJyYXlJbmRleDpmYWxzZVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIC4uLiByZXN0b3JpbmcgZmllbGQgbmFtZXMgdG8gcHJldmlvdXMgc3RhdGVcblx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoICduYW1lJywgJCh0aGlzKS5kYXRhKCdwcmV2LW5hbWUnKSApO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHVwZGF0ZSB2YWx1ZXMuXG5cdFx0XHRjb250cm9sLnNldHRpbmcuc2V0KCB2YWx1ZVt0aGlzLmlkXSApO1xuXHRcdH1cblx0fSk7XG5cblx0YWNmLmFkZF9hY3Rpb24oJ3ZhbGlkYXRpb25fc3VjY2VzcycsIGZ1bmN0aW9uKGUpIHtcblx0XHRjdXJyZW50X2NvbnRyb2wudXBkYXRlVmFsdWVzKCk7XG5cdH0pO1xuXHRhY2YuYWRkX2FjdGlvbigndmFsaWRhdGlvbl9mYWlsdXJlJyxmdW5jdGlvbihlKXtcblx0XHQvLyBuZWVkIHRvIHJlbW92ZSBhY2YgbWVzc2FnZSBiZWNhdXNlIGl0IGRpc3BsYXlzIGEgd3JvbmcgbnVtYmVyIG9mIGludmFsaWQgZmllbGRzXG5cdFx0Y3VycmVudF9jb250cm9sLmNvbnRhaW5lci5maW5kKCc+IC5hY2YtZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xuXHR9KTtcblx0YWNmLmFkZF9hY3Rpb24oJ2ludmFsaWQnLCBmdW5jdGlvbigkaW5wdXQpe1xuXHRcdGFjZi52YWxpZGF0aW9uLmJ1c3kgPSB0cnVlO1xuXHR9KTtcblxuXG5cblx0YXBpLmJpbmQoJ3JlYWR5JyxmdW5jdGlvbigpe1xuXHRcdGFwaS5wcmV2aWV3ZXIuYmluZCggJ2FjZi1jdXN0b21pemUtY29udGV4dCcsIGZ1bmN0aW9uKCBuZXdfdmFsICkge1xuXHRcdFx0dmFyIHByZXZfdmFsO1xuXG5cdFx0XHRwcmV2X3ZhbCA9IGFjZl9jdXN0b21pemVfY29udGV4dFxuXHRcdFx0aWYgKCBKU09OLnN0cmluZ2lmeShuZXdfdmFsKSAhPSBKU09OLnN0cmluZ2lmeShwcmV2X3ZhbCkgKSB7XG5cdFx0XHRcdGFwaS50cmlnZ2VyKCAnYWNmLWN1c3RvbWl6ZS1jb250ZXh0LWNoYW5nZWQnLCBuZXdfdmFsIClcblx0XHRcdH1cblx0XHRcdGFjZl9jdXN0b21pemVfY29udGV4dCA9IG5ld192YWw7XG5cdFx0fSk7XG5cdH0pO1xuXG5cblx0YXBpLmJpbmQoICdzYXZlLXJlcXVlc3QtcGFyYW1zJywgZnVuY3Rpb24ocXVlcnkpe1xuXHRcdGNvbnNvbGUubG9nKGFjZl9jdXN0b21pemVfY29udGV4dClcblx0XHRfLmV4dGVuZCggcXVlcnksIHsnYWNmX2N1c3RvbWl6ZV9jb250ZXh0JyA6IEpTT04uc3RyaW5naWZ5KCBhY2ZfY3VzdG9taXplX2NvbnRleHQgKX0gKSA7XG5cdH0gKTtcblx0Ly9cblxuIFx0YXBpLmNvbnRyb2xDb25zdHJ1Y3RvclsnYWNmX2N1c3RvbWl6ZXInXSA9IGFwaS5BY2ZGaWVsZEdyb3VwQ29udHJvbDtcblxuXHRhcGkuYmluZCgnY2hhbmdlc2V0LWVycm9yJywgZnVuY3Rpb24oKXtcblx0XHQvL2NvbnNvbGUubG9nKGFyZ3VtZW50cylcblx0fSk7XG5cblxufSkoIHdwLmN1c3RvbWl6ZSwgalF1ZXJ5LCBhY2ZfZmllbGRncm91cF9jb250cm9sICk7XG4iXX0=

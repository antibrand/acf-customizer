!function(n,e,t){var a,o;n.AcfFieldGroupControl=n.Control.extend({preview_context:{type:null,id:null},initialize:function(t,i){var e;e=i||{},n.Control.prototype.initialize.call(this,t,e)},set_preview_context:function(t){return this.preview_context=t,this},ready:function(){var e=this;this.setting();0<=["post","term","user"].indexOf(e.params.storage_type)&&n.bind("acf-customize-context-changed",function(t){t.type===e.params.storage_type?e.set_preview_context(t).load_form():e.unload_form()}),this.$wrapper=e.container.find(".acf-fields").first(),acf.do_action("append",e.container),e.load_form(),e.container.on("change",".acf-field",function(t){var i=e.container.find(".acf-field :input");acf.validation.errors=[],i.each(function(){this.checkValidity()}),acf.validation.busy=!1,a=e,acf.validation.fetch({form:e.container,lock:!1,success:function(t){}})}),n.Control.prototype.ready.apply(e,arguments)},load_form:function(){var i=this;request=wp.ajax.send("load_customizer_field_groups_"+this.id,{data:{wp_customize:"on",section_id:this.id,acf_customize_context:JSON.stringify(i.preview_context),_nonce:t.load_field_group_nonce}}),request.done(function(t){i.$wrapper.html(t.html),i.$fields=i.container.find(".acf-fields > .acf-field"),i.init_fields()}),request.fail(function(t){console.log(" - load field group failure")}),request.always(function(){request=null})},unload_form:function(){this.$wrapper.html("")},init_fields:function(){acf.do_action("ready",this.$wrapper)},updateValues:function(){var t,i=this.container.find(".acf-field :input");i.each(function(){var t=e(this).attr("name");t&&(e(this).data("prev-name",t),e(this).attr("name",t.replace(/\[([0-9]+)\]/g,"[_$1]")))}),t=i.serializeJSON({useIntKeysAsArrayIndex:!1}),i.each(function(){e(this).attr("name",e(this).data("prev-name"))}),this.setting.set(t[this.id])}}),acf.add_action("validation_success",function(t){a.updateValues()}),acf.add_action("validation_failure",function(t){a.container.find("> .acf-error-message").remove()}),acf.add_action("invalid",function(t){acf.validation.busy=!0}),n.bind("ready",function(){n.previewer.bind("acf-customize-context",function(t){var i;i=o,JSON.stringify(t)!=JSON.stringify(i)&&n.trigger("acf-customize-context-changed",t),o=t})}),n.bind("save-request-params",function(t){_.extend(t,{acf_customize_context:JSON.stringify(o)})}),n.controlConstructor.acf_customizer=n.AcfFieldGroupControl,n.bind("changeset-error",function(){})}(wp.customize,jQuery,acf_fieldgroup_control);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLmpzIl0sIm5hbWVzIjpbImFwaSIsIiQiLCJvcHRpb25zIiwiY3VycmVudF9jb250cm9sIiwiYWNmX2N1c3RvbWl6ZV9jb250ZXh0IiwiQWNmRmllbGRHcm91cENvbnRyb2wiLCJDb250cm9sIiwiZXh0ZW5kIiwicHJldmlld19jb250ZXh0IiwidHlwZSIsImlkIiwiaW5pdGlhbGl6ZSIsIm9wdCIsImFyZ3MiLCJwcm90b3R5cGUiLCJjYWxsIiwidGhpcyIsInNldF9wcmV2aWV3X2NvbnRleHQiLCJjb250ZXh0IiwicmVhZHkiLCJjb250cm9sIiwic2V0dGluZyIsImluZGV4T2YiLCJwYXJhbXMiLCJzdG9yYWdlX3R5cGUiLCJiaW5kIiwibG9hZF9mb3JtIiwidW5sb2FkX2Zvcm0iLCIkd3JhcHBlciIsImNvbnRhaW5lciIsImZpbmQiLCJmaXJzdCIsImFjZiIsImRvX2FjdGlvbiIsIm9uIiwiZSIsIiRpbnB1dHMiLCJ2YWxpZGF0aW9uIiwiZXJyb3JzIiwiZWFjaCIsImNoZWNrVmFsaWRpdHkiLCJidXN5IiwiZmV0Y2giLCJmb3JtIiwibG9jayIsInN1Y2Nlc3MiLCIkZm9ybSIsImFwcGx5IiwiYXJndW1lbnRzIiwicmVxdWVzdCIsIndwIiwiYWpheCIsInNlbmQiLCJkYXRhIiwid3BfY3VzdG9taXplIiwic2VjdGlvbl9pZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJfbm9uY2UiLCJsb2FkX2ZpZWxkX2dyb3VwX25vbmNlIiwiZG9uZSIsInJlc3BvbnNlIiwiaHRtbCIsIiRmaWVsZHMiLCJpbml0X2ZpZWxkcyIsImZhaWwiLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwidXBkYXRlVmFsdWVzIiwidmFsdWUiLCJuYW1lIiwiYXR0ciIsInJlcGxhY2UiLCJzZXJpYWxpemVKU09OIiwidXNlSW50S2V5c0FzQXJyYXlJbmRleCIsInNldCIsImFkZF9hY3Rpb24iLCJyZW1vdmUiLCIkaW5wdXQiLCJwcmV2aWV3ZXIiLCJuZXdfdmFsIiwicHJldl92YWwiLCJ0cmlnZ2VyIiwicXVlcnkiLCJfIiwiY29udHJvbENvbnN0cnVjdG9yIiwiY3VzdG9taXplIiwialF1ZXJ5IiwiYWNmX2ZpZWxkZ3JvdXBfY29udHJvbCJdLCJtYXBwaW5ncyI6IkNBQ0EsU0FBV0EsRUFBS0MsRUFBR0MsR0FHbEIsSUFBSUMsRUFDSEMsRUFFREosRUFBSUsscUJBQXVCTCxFQUFJTSxRQUFRQyxPQUFPLENBQzdDQyxnQkFBaUIsQ0FDaEJDLEtBQU0sS0FDTkMsR0FBSSxNQUVMQyxXQUFZLFNBQVVELEVBQUlFLEdBQ3pCLElBQW9CQyxFQUVYQSxFQUFPRCxHQUFPLEdBRXZCWixFQUFJTSxRQUFRUSxVQUFVSCxXQUFXSSxLQUpuQkMsS0FJa0NOLEVBQUlHLElBR3JESSxvQkFBcUIsU0FBU0MsR0FFN0IsT0FEQUYsS0FBS1IsZ0JBQWtCVSxFQUNoQkYsTUFFUkcsTUFBTyxXQUNOLElBQUlDLEVBQVVKLEtBQ0ZBLEtBQUtLLFVBRVosR0FBSyxDQUFDLE9BQU8sT0FBTyxRQUFRQyxRQUFTRixFQUFRRyxPQUFPQyxlQUV4RHhCLEVBQUl5QixLQUFNLGdDQUFpQyxTQUFVUCxHQUMvQ0EsRUFBUVQsT0FBU1csRUFBUUcsT0FBT0MsYUFDcENKLEVBQ0VILG9CQUFxQkMsR0FDckJRLFlBRUZOLEVBQVFPLGdCQU1YWCxLQUFLWSxTQUFXUixFQUFRUyxVQUFVQyxLQUFLLGVBQWVDLFFBQ3REQyxJQUFJQyxVQUFXLFNBQVViLEVBQVFTLFdBRWpDVCxFQUFRTSxZQUVSTixFQUFRUyxVQUFVSyxHQUFHLFNBQVMsYUFBYyxTQUFTQyxHQUdwRCxJQUFJQyxFQUFVaEIsRUFBUVMsVUFBVUMsS0FBSyxxQkFFckNFLElBQUlLLFdBQVdDLE9BQVMsR0FDeEJGLEVBQVFHLEtBQUssV0FDWnZCLEtBQUt3QixrQkFHTlIsSUFBSUssV0FBV0ksTUFBTyxFQUN0QnRDLEVBQWtCaUIsRUFDbEJZLElBQUlLLFdBQVdLLE1BQU8sQ0FDckJDLEtBQU12QixFQUFRUyxVQUNkZSxNQUFLLEVBQ0xDLFFBQVEsU0FBU0MsU0FVbkI5QyxFQUFJTSxRQUFRUSxVQUFVSyxNQUFNNEIsTUFBTzNCLEVBQVM0QixZQUU3Q3RCLFVBQVcsV0FFVixJQUFJTixFQUFVSixLQUVkaUMsUUFBVUMsR0FBR0MsS0FBS0MsS0FBTSxnQ0FBZ0NwQyxLQUFLTixHQUFJLENBQ2hFMkMsS0FBTSxDQUNMQyxhQUFpQixLQUNqQkMsV0FBZ0J2QyxLQUFLTixHQUNyQk4sc0JBQXdCb0QsS0FBS0MsVUFBV3JDLEVBQVFaLGlCQUNoRGtELE9BQWF4RCxFQUFReUQsMEJBSXZCVixRQUFRVyxLQUFNLFNBQVNDLEdBQ3RCekMsRUFBUVEsU0FBU2tDLEtBQU1ELEVBQVNDLE1BQ2hDMUMsRUFBUTJDLFFBQVUzQyxFQUFRUyxVQUFVQyxLQUFLLDRCQVN6Q1YsRUFBUTRDLGdCQU1UZixRQUFRZ0IsS0FBTSxTQUFVSixHQUN2QkssUUFBUUMsSUFBSSxpQ0FHYmxCLFFBQVFtQixPQUFRLFdBQ2ZuQixRQUFVLFFBSVp0QixZQUFhLFdBQ0VYLEtBQ05ZLFNBQVNrQyxLQUFNLEtBRXhCRSxZQUFhLFdBS1poQyxJQUFJQyxVQUFVLFFBSEFqQixLQUdpQlksV0FFaEN5QyxhQUFjLFdBQ2IsSUFFQ0MsRUFEQWxDLEVBRGFwQixLQUNLYSxVQUFVQyxLQUFLLHFCQU1sQ00sRUFBUUcsS0FBSyxXQUNaLElBQUlnQyxFQUFPdEUsRUFBRWUsTUFBTXdELEtBQUssUUFDakJELElBR1B0RSxFQUFFZSxNQUFNcUMsS0FBSyxZQUFha0IsR0FDMUJ0RSxFQUFFZSxNQUFNd0QsS0FBSyxPQUFPRCxFQUFLRSxRQUFRLGdCQUFnQixhQUdsREgsRUFBUWxDLEVBQVFzQyxjQUFjLENBQzdCQyx3QkFBdUIsSUFJeEJ2QyxFQUFRRyxLQUFLLFdBQ1p0QyxFQUFFZSxNQUFNd0QsS0FBTSxPQUFRdkUsRUFBRWUsTUFBTXFDLEtBQUssZ0JBdEJ0QnJDLEtBMEJOSyxRQUFRdUQsSUFBS04sRUFBTXRELEtBQUtOLFFBSWxDc0IsSUFBSTZDLFdBQVcscUJBQXNCLFNBQVMxQyxHQUM3Q2hDLEVBQWdCa0UsaUJBRWpCckMsSUFBSTZDLFdBQVcscUJBQXFCLFNBQVMxQyxHQUU1Q2hDLEVBQWdCMEIsVUFBVUMsS0FBSyx3QkFBd0JnRCxXQUV4RDlDLElBQUk2QyxXQUFXLFVBQVcsU0FBU0UsR0FDbEMvQyxJQUFJSyxXQUFXSSxNQUFPLElBS3ZCekMsRUFBSXlCLEtBQUssUUFBUSxXQUNoQnpCLEVBQUlnRixVQUFVdkQsS0FBTSx3QkFBeUIsU0FBVXdELEdBQ3RELElBQUlDLEVBRUpBLEVBQVc5RSxFQUNOb0QsS0FBS0MsVUFBVXdCLElBQVl6QixLQUFLQyxVQUFVeUIsSUFDOUNsRixFQUFJbUYsUUFBUyxnQ0FBaUNGLEdBRS9DN0UsRUFBd0I2RSxNQUsxQmpGLEVBQUl5QixLQUFNLHNCQUF1QixTQUFTMkQsR0FDekNDLEVBQUU5RSxPQUFRNkUsRUFBTyxDQUFDaEYsc0JBQTBCb0QsS0FBS0MsVUFBV3JELE9BSTVESixFQUFJc0YsbUJBQW1DLGVBQUl0RixFQUFJSyxxQkFFaERMLEVBQUl5QixLQUFLLGtCQUFtQixjQTNMN0IsQ0FnTUl5QixHQUFHcUMsVUFBV0MsT0FBUUMiLCJmaWxlIjoiY3VzdG9taXplLWFjZi1maWVsZGdyb3VwLWNvbnRyb2wubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4oZnVuY3Rpb24oIGFwaSwgJCwgb3B0aW9ucyApIHtcblxuXHQvLyBzdG9yZSBmb3IgYWNmJ3Mgc3RhdGljIHZhbGlkYXRpb24gY2FsbGJhY2tzXG5cdHZhciBjdXJyZW50X2NvbnRyb2wsXG5cdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0O1xuXG5cdGFwaS5BY2ZGaWVsZEdyb3VwQ29udHJvbCA9IGFwaS5Db250cm9sLmV4dGVuZCh7XG5cdFx0cHJldmlld19jb250ZXh0OiB7XG5cdFx0XHR0eXBlOiBudWxsLFxuXHRcdFx0aWQ6IG51bGwsXG5cdFx0fSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbiggaWQsIG9wdCApIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcywgYXJncztcblxuICAgICAgICAgICAgYXJncyA9IG9wdCB8fCB7fTtcblxuXHRcdFx0YXBpLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCggY29udHJvbCwgaWQsIGFyZ3MgKTtcblxuXHRcdH0sXG5cdFx0c2V0X3ByZXZpZXdfY29udGV4dDogZnVuY3Rpb24oY29udGV4dCkge1xuXHRcdFx0dGhpcy5wcmV2aWV3X2NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZWFkeTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsXG5cdFx0XHRcdHNldHRpbmdzID0gdGhpcy5zZXR0aW5nKCk7XG5cblx0XHRcdGlmICggMCA8PSBbJ3Bvc3QnLCd0ZXJtJywndXNlciddLmluZGV4T2YoIGNvbnRyb2wucGFyYW1zLnN0b3JhZ2VfdHlwZSApICkge1xuXHRcdFx0XHQvLyByZWxvYWQgZmllbGRzIGlmIHByZXZpZXcgdXJsIGNoYW5nZWRcblx0XHRcdFx0YXBpLmJpbmQoICdhY2YtY3VzdG9taXplLWNvbnRleHQtY2hhbmdlZCcsIGZ1bmN0aW9uKCBjb250ZXh0ICkge1xuXHRcdFx0XHRcdGlmICggY29udGV4dC50eXBlID09PSBjb250cm9sLnBhcmFtcy5zdG9yYWdlX3R5cGUgKSB7XG5cdFx0XHRcdFx0XHRjb250cm9sXG5cdFx0XHRcdFx0XHRcdC5zZXRfcHJldmlld19jb250ZXh0KCBjb250ZXh0IClcblx0XHRcdFx0XHRcdFx0LmxvYWRfZm9ybSgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb250cm9sLnVubG9hZF9mb3JtKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0dGhpcy4kd3JhcHBlciA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGRzJykuZmlyc3QoKTtcblx0XHRcdGFjZi5kb19hY3Rpb24oICdhcHBlbmQnLCBjb250cm9sLmNvbnRhaW5lciApO1xuXG5cdFx0XHRjb250cm9sLmxvYWRfZm9ybSgpO1xuXG5cdFx0XHRjb250cm9sLmNvbnRhaW5lci5vbignY2hhbmdlJywnLmFjZi1maWVsZCcsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHQvLypcblx0XHRcdFx0Ly8gY2hlY2sgdmFsaWRcblx0XHRcdFx0dmFyICRpbnB1dHMgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkIDppbnB1dCcpO1xuXG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmVycm9ycyA9IFtdO1xuXHRcdFx0XHQkaW5wdXRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0XHR0aGlzLmNoZWNrVmFsaWRpdHkoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uYnVzeSA9IGZhbHNlO1xuXHRcdFx0XHRjdXJyZW50X2NvbnRyb2wgPSBjb250cm9sO1xuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5mZXRjaCgge1xuXHRcdFx0XHRcdGZvcm06IGNvbnRyb2wuY29udGFpbmVyLFxuXHRcdFx0XHRcdGxvY2s6ZmFsc2UsXG5cdFx0XHRcdFx0c3VjY2VzczpmdW5jdGlvbigkZm9ybSkge1xuXHRcdFx0XHRcdFx0Ly8gYWxsb3cgZm9yIHN1Ym1pdFxuXHRcdFx0XHRcdFx0Ly8gYWNmLnZhbGlkYXRpb24uaWdub3JlID0gMTtcblx0XHRcdFx0XHRcdC8vICRidXR0b24udHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSk7XG5cblx0XHRcdGFwaS5Db250cm9sLnByb3RvdHlwZS5yZWFkeS5hcHBseSggY29udHJvbCwgYXJndW1lbnRzICk7XG5cdFx0fSxcblx0XHRsb2FkX2Zvcm06IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXM7XG5cblx0XHRcdHJlcXVlc3QgPSB3cC5hamF4LnNlbmQoICdsb2FkX2N1c3RvbWl6ZXJfZmllbGRfZ3JvdXBzXycrdGhpcy5pZCwge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0d3BfY3VzdG9taXplXHRcdFx0OiAnb24nLFxuXHRcdFx0XHRcdHNlY3Rpb25faWRcdFx0XHRcdDogdGhpcy5pZCxcblx0XHRcdFx0XHRhY2ZfY3VzdG9taXplX2NvbnRleHRcdDogSlNPTi5zdHJpbmdpZnkoIGNvbnRyb2wucHJldmlld19jb250ZXh0ICksXG5cdFx0XHRcdFx0X25vbmNlXHRcdFx0XHRcdDogb3B0aW9ucy5sb2FkX2ZpZWxkX2dyb3VwX25vbmNlLFxuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHRcdHJlcXVlc3QuZG9uZSggZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCByZXNwb25zZS5odG1sICk7XG5cdFx0XHRcdGNvbnRyb2wuJGZpZWxkcyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcpO1xuXHRcdFx0XHQvLyBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkcyBbaWRdJykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQvLyBcdHZhciBpZCA9ICQodGhpcykuYXR0cignaWQnKSxcblx0XHRcdFx0Ly8gXHRcdG5ld19pZCA9IGNvbnRyb2wuaWQgKyBpZDtcblx0XHRcdFx0Ly8gXHQkKHRoaXMpLmF0dHIoJ2lkJywgbmV3X2lkICk7XG5cdFx0XHRcdC8vIFx0Y29udHJvbC5jb250YWluZXIuZmluZCgnW2Zvcj1cIicraWQrJ1wiXScpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0Ly8gXHRcdCQodGhpcykuYXR0cignZm9yJywgbmV3X2lkICk7XG5cdFx0XHRcdC8vIFx0fSk7XG5cdFx0XHRcdC8vIH0pO1xuXHRcdFx0XHRjb250cm9sLmluaXRfZmllbGRzKCk7XG5cdFx0XHRcdC8qXG5cdFx0XHRcdGNvbnRyb2wuJGlucHV0cyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGQgOmlucHV0Jyk7XG5cdFx0XHRcdCovXG5cdFx0XHR9ICk7XG5cblx0XHRcdHJlcXVlc3QuZmFpbCggZnVuY3Rpb24oIHJlc3BvbnNlICkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnIC0gbG9hZCBmaWVsZCBncm91cCBmYWlsdXJlJylcblx0XHRcdH0gKTtcblxuXHRcdFx0cmVxdWVzdC5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXF1ZXN0ID0gbnVsbDtcblx0XHRcdH0gKTtcblxuXHRcdH0sXG5cdFx0dW5sb2FkX2Zvcm06IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzO1xuXHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCAnJyApO1xuXHRcdH0sXG5cdFx0aW5pdF9maWVsZHM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXM7XG5cblx0XHRcdC8vIHdpbGwgaW5pdCBmaWVsZHNcblx0XHRcdGFjZi5kb19hY3Rpb24oJ3JlYWR5JywgY29udHJvbC4kd3JhcHBlcik7XG5cdFx0fSxcblx0XHR1cGRhdGVWYWx1ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHQkaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKSxcblx0XHRcdFx0dmFsdWU7XG5cblx0XHRcdC8vIHByZWZpeGluZyBudW1lcmljIGtleXMgd2l0aCBhIGBfYFxuXHRcdFx0Ly8gcmVwZWF0ZXIgZmllbGQgbmFtZXMgaGF2ZSBudW1lcmljIGtleXMsIHdoaWNoIGdldCBjYXN0ZWQgdG8gaW50IHVwb24gc2VyaWFsaXphdGlvbi5cblx0XHRcdC8vIEFzIGEgcmVzdWx0IHRoZSBzb3J0aW5nIGluZm9ybWF0aW9uIGlzIGxvc3QgLi4uXG5cdFx0XHQkaW5wdXRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIG5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTtcblx0XHRcdFx0aWYgKCAhIG5hbWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQodGhpcykuZGF0YSgncHJldi1uYW1lJywgbmFtZSApO1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoJ25hbWUnLG5hbWUucmVwbGFjZSgvXFxbKFswLTldKylcXF0vZywnXFxbXyQxXFxdJykpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHZhbHVlID0gJGlucHV0cy5zZXJpYWxpemVKU09OKHtcblx0XHRcdFx0dXNlSW50S2V5c0FzQXJyYXlJbmRleDpmYWxzZVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIC4uLiByZXN0b3JpbmcgZmllbGQgbmFtZXMgdG8gcHJldmlvdXMgc3RhdGVcblx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoICduYW1lJywgJCh0aGlzKS5kYXRhKCdwcmV2LW5hbWUnKSApO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHVwZGF0ZSB2YWx1ZXMuXG5cdFx0XHRjb250cm9sLnNldHRpbmcuc2V0KCB2YWx1ZVt0aGlzLmlkXSApO1xuXHRcdH1cblx0fSk7XG5cblx0YWNmLmFkZF9hY3Rpb24oJ3ZhbGlkYXRpb25fc3VjY2VzcycsIGZ1bmN0aW9uKGUpIHtcblx0XHRjdXJyZW50X2NvbnRyb2wudXBkYXRlVmFsdWVzKCk7XG5cdH0pO1xuXHRhY2YuYWRkX2FjdGlvbigndmFsaWRhdGlvbl9mYWlsdXJlJyxmdW5jdGlvbihlKXtcblx0XHQvLyBuZWVkIHRvIHJlbW92ZSBhY2YgbWVzc2FnZSBiZWNhdXNlIGl0IGRpc3BsYXlzIGEgd3JvbmcgbnVtYmVyIG9mIGludmFsaWQgZmllbGRzXG5cdFx0Y3VycmVudF9jb250cm9sLmNvbnRhaW5lci5maW5kKCc+IC5hY2YtZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xuXHR9KTtcblx0YWNmLmFkZF9hY3Rpb24oJ2ludmFsaWQnLCBmdW5jdGlvbigkaW5wdXQpe1xuXHRcdGFjZi52YWxpZGF0aW9uLmJ1c3kgPSB0cnVlO1xuXHR9KTtcblxuXG5cblx0YXBpLmJpbmQoJ3JlYWR5JyxmdW5jdGlvbigpe1xuXHRcdGFwaS5wcmV2aWV3ZXIuYmluZCggJ2FjZi1jdXN0b21pemUtY29udGV4dCcsIGZ1bmN0aW9uKCBuZXdfdmFsICkge1xuXHRcdFx0dmFyIHByZXZfdmFsO1xuXG5cdFx0XHRwcmV2X3ZhbCA9IGFjZl9jdXN0b21pemVfY29udGV4dFxuXHRcdFx0aWYgKCBKU09OLnN0cmluZ2lmeShuZXdfdmFsKSAhPSBKU09OLnN0cmluZ2lmeShwcmV2X3ZhbCkgKSB7XG5cdFx0XHRcdGFwaS50cmlnZ2VyKCAnYWNmLWN1c3RvbWl6ZS1jb250ZXh0LWNoYW5nZWQnLCBuZXdfdmFsIClcblx0XHRcdH1cblx0XHRcdGFjZl9jdXN0b21pemVfY29udGV4dCA9IG5ld192YWw7XG5cdFx0fSk7XG5cdH0pO1xuXG5cblx0YXBpLmJpbmQoICdzYXZlLXJlcXVlc3QtcGFyYW1zJywgZnVuY3Rpb24ocXVlcnkpe1xuXHRcdF8uZXh0ZW5kKCBxdWVyeSwgeydhY2ZfY3VzdG9taXplX2NvbnRleHQnIDogSlNPTi5zdHJpbmdpZnkoIGFjZl9jdXN0b21pemVfY29udGV4dCApfSApIDtcblx0fSApO1xuXHQvL1xuXG4gXHRhcGkuY29udHJvbENvbnN0cnVjdG9yWydhY2ZfY3VzdG9taXplciddID0gYXBpLkFjZkZpZWxkR3JvdXBDb250cm9sO1xuXG5cdGFwaS5iaW5kKCdjaGFuZ2VzZXQtZXJyb3InLCBmdW5jdGlvbigpe1xuXHRcdC8vY29uc29sZS5sb2coYXJndW1lbnRzKVxuXHR9KTtcblxuXG59KSggd3AuY3VzdG9taXplLCBqUXVlcnksIGFjZl9maWVsZGdyb3VwX2NvbnRyb2wgKTtcbiJdfQ==

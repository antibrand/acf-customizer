!function(i,o,a){var c,n,r=[];i.AcfFieldGroupControl=i.Control.extend({preview_context:{type:null,id:null},initialize:function(e,t){var n;n=t||{},i.Control.prototype.initialize.call(this,e,n)},set_preview_context:function(e){return this.preview_context=e,this},ready:function(){var n=this;this.setting();0<=["post","term","user"].indexOf(n.params.storage_type)&&i.bind("acf-customize-context-changed",function(e){e.type===n.params.storage_type?n.set_preview_context(e).load_form():n.unload_form()}),this.$wrapper=n.container.find(".acf-fields").first(),acf.do_action("append",n.container),n.load_form(),n.container.on("change",".acf-field",function(e){var t=n.container.find(".acf-field :input[name]");acf.validation.errors=[],t.each(function(){this.checkValidity()}),acf.validation.busy=!1,o((c=n).container).data("acf",null),acf.validation.fetch({form:n.container,lock:!1,success:function(e){},complete:function(e){acf.unlockForm(e)}})}),i.Control.prototype.ready.apply(n,arguments)},load_form:function(){var e,t,n,i,o=this;e=wp.ajax.send("load_customizer_field_groups_"+o.id,{data:{wp_customize:"on",section_id:o.id,acf_customize_context:JSON.stringify(o.preview_context),_nonce:a.load_field_group_nonce}}),t=e,n=function(e){o.$wrapper.html(e.html),o.init_fields()},i={idx:r.length,request:t,done:n,finished:!1,scope:null,arguments:null},r.push(i),t.done(function(){var e;for(i.finished=!0,i.self=this,i.arguments=arguments;r.length&&r[0].finished;)(e=r.shift()).done.apply(e.self,e.arguments)}),e.fail(function(e){console.log(" - load field group failure")}),e.always(function(){e=null})},unload_form:function(){this.$wrapper.html("")},init_fields:function(){var e=this;e.$fields=e.container.find(".acf-fields > .acf-field"),setTimeout(function(){acf.doAction("ready",e.$wrapper),acf.doAction("prepare")},1)},updateValues:function(){var e,t=this.container.find(".acf-field :input");t.each(function(){var e=o(this).attr("name");e&&(o(this).data("prev-name",e),o(this).attr("name",e.replace(/\[([0-9]+)\]/g,"[_$1]")))}),e=t.serializeJSON({useIntKeysAsArrayIndex:!1}),t.each(function(){o(this).attr("name",o(this).data("prev-name")),o(this).data("prev-name",null)}),this.setting.set(function n(i){return o.isPlainObject(i)&&(Object.keys(i).join("").match(/^([0-9_]+)$/)&&(i=Object.values(i)),o.each(i,function(e,t){i[e]=n(t)})),i}(e[this.id]))},focusField:function(e){for(var t,n=this.$wrapper,i=[];e.length;)if(t=e.pop(),(n=_.isNumber(t)?n.is('[data-type="flexible_content"]')?n.find("> .acf-input > .acf-flexible-content > .values").children(":not(.acf-clone)").eq(t):!!n.is('[data-type="repeater"]')&&(console.log(n.find("> .acf-input > .acf-repeater > .acf-table > tbody")),n.find("> .acf-input > .acf-repeater > .acf-table > tbody").children(":not(.acf-clone)").eq(t)):n.find('[data-key="'+t+'"]'))&&n.is("[data-id]")&&i.push(n),!n.length)return!1;return this.focus(),setTimeout(function(){i.length&&i.forEach(function(e){var t=acf.getField(e.closest(".acf-field"));e.siblings().not(e).each(function(){"repeater"===t.type?t.collapse(o(this)):"flexible_content"===t.type&&t.closeLayout(o(this))}),"repeater"===t.type?t.expand(e):"flexible_content"===t.type&&t.openLayout(e)}),_.isNumber(t)?n.attr("tabindex",1).focus():n.find("input").focus()},500),!0}}),acf.add_action("validation_success",function(e){c.updateValues()}),acf.add_action("validation_failure",function(e){c.container.find("> .acf-error-message").remove()}),acf.add_action("invalid",function(e){acf.validation.busy=!0}),i.bind("ready",function(){i.previewer.bind("acf-customize-context",function(e){var t;t=n,JSON.stringify(e)!=JSON.stringify(t)&&i.trigger("acf-customize-context-changed",e),n=e}),i.previewer.bind("focus-control-for-setting",function(e){}),i.previewer.bind("acf-focus",function(t){console.log(t);var n=t.pop();i.control.each(function(e){if(e.constructor===i.AcfFieldGroupControl)if(_.isNumber(n)){if(e.preview_context&&e.preview_context.id===n&&e.focusField(t))return}else if(e.id===n&&e.focusField(t))return})})}),i.bind("save-request-params",function(e){_.extend(e,{acf_customize_context:JSON.stringify(n)})}),i.controlConstructor.acf_customizer=i.AcfFieldGroupControl,i.bind("changeset-error",function(){})}(wp.customize,jQuery,acf_fieldgroup_control);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLmpzIl0sIm5hbWVzIjpbImFwaSIsIiQiLCJvcHRpb25zIiwiY3VycmVudF9jb250cm9sIiwiYWNmX2N1c3RvbWl6ZV9jb250ZXh0IiwicXVldWUiLCJBY2ZGaWVsZEdyb3VwQ29udHJvbCIsIkNvbnRyb2wiLCJleHRlbmQiLCJwcmV2aWV3X2NvbnRleHQiLCJ0eXBlIiwiaWQiLCJpbml0aWFsaXplIiwib3B0IiwiYXJncyIsInByb3RvdHlwZSIsImNhbGwiLCJ0aGlzIiwic2V0X3ByZXZpZXdfY29udGV4dCIsImNvbnRleHQiLCJyZWFkeSIsImNvbnRyb2wiLCJzZXR0aW5nIiwiaW5kZXhPZiIsInBhcmFtcyIsInN0b3JhZ2VfdHlwZSIsImJpbmQiLCJsb2FkX2Zvcm0iLCJ1bmxvYWRfZm9ybSIsIiR3cmFwcGVyIiwiY29udGFpbmVyIiwiZmluZCIsImZpcnN0IiwiYWNmIiwiZG9fYWN0aW9uIiwib24iLCJlIiwiJGlucHV0cyIsInZhbGlkYXRpb24iLCJlcnJvcnMiLCJlYWNoIiwiY2hlY2tWYWxpZGl0eSIsImJ1c3kiLCJkYXRhIiwiZmV0Y2giLCJmb3JtIiwibG9jayIsInN1Y2Nlc3MiLCIkZm9ybSIsImNvbXBsZXRlIiwidW5sb2NrRm9ybSIsImFwcGx5IiwiYXJndW1lbnRzIiwicmVxdWVzdCIsImRvbmUiLCJpdGVtIiwid3AiLCJhamF4Iiwic2VuZCIsIndwX2N1c3RvbWl6ZSIsInNlY3Rpb25faWQiLCJKU09OIiwic3RyaW5naWZ5IiwiX25vbmNlIiwibG9hZF9maWVsZF9ncm91cF9ub25jZSIsInJlc3BvbnNlIiwiaHRtbCIsImluaXRfZmllbGRzIiwiaWR4IiwibGVuZ3RoIiwiZmluaXNoZWQiLCJzY29wZSIsInB1c2giLCJpdCIsInNlbGYiLCJzaGlmdCIsImZhaWwiLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiJGZpZWxkcyIsInNldFRpbWVvdXQiLCJkb0FjdGlvbiIsInVwZGF0ZVZhbHVlcyIsInZhbHVlIiwibmFtZSIsImF0dHIiLCJyZXBsYWNlIiwic2VyaWFsaXplSlNPTiIsInVzZUludEtleXNBc0FycmF5SW5kZXgiLCJzZXQiLCJmaXhOdW1LZXlzIiwib2JqIiwiaXNQbGFpbk9iamVjdCIsIk9iamVjdCIsImtleXMiLCJqb2luIiwibWF0Y2giLCJ2YWx1ZXMiLCJpIiwiZWwiLCJmb2N1c0ZpZWxkIiwicGF0aCIsImN1cnJlbnQiLCIkZm9jdXNFbCIsImV4cGFuZCIsInBvcCIsIl8iLCJpc051bWJlciIsImlzIiwiY2hpbGRyZW4iLCJlcSIsImZvY3VzIiwiZm9yRWFjaCIsIiRyb3ciLCJmaWVsZCIsImdldEZpZWxkIiwiY2xvc2VzdCIsInNpYmxpbmdzIiwibm90IiwiY29sbGFwc2UiLCJjbG9zZUxheW91dCIsIm9wZW5MYXlvdXQiLCJhZGRfYWN0aW9uIiwicmVtb3ZlIiwiJGlucHV0IiwicHJldmlld2VyIiwibmV3X3ZhbCIsInByZXZfdmFsIiwidHJpZ2dlciIsInNldHRpbmdJZCIsInBvc3RfaWQiLCJjb25zdHJ1Y3RvciIsInF1ZXJ5IiwiY29udHJvbENvbnN0cnVjdG9yIiwiY3VzdG9taXplIiwialF1ZXJ5IiwiYWNmX2ZpZWxkZ3JvdXBfY29udHJvbCJdLCJtYXBwaW5ncyI6IkNBQ0EsU0FBV0EsRUFBS0MsRUFBR0MsR0FHbEIsSUFBSUMsRUFDSEMsRUFDQUMsRUFBUSxHQTRDVEwsRUFBSU0scUJBQXVCTixFQUFJTyxRQUFRQyxPQUFPLENBQzdDQyxnQkFBaUIsQ0FDaEJDLEtBQU0sS0FDTkMsR0FBSSxNQUVMQyxXQUFZLFNBQVVELEVBQUlFLEdBQ3pCLElBQW9CQyxFQUVYQSxFQUFPRCxHQUFPLEdBRXZCYixFQUFJTyxRQUFRUSxVQUFVSCxXQUFXSSxLQUpuQkMsS0FJa0NOLEVBQUlHLElBR3JESSxvQkFBcUIsU0FBU0MsR0FFN0IsT0FEQUYsS0FBS1IsZ0JBQWtCVSxFQUNoQkYsTUFFUkcsTUFBTyxXQUNOLElBQUlDLEVBQVVKLEtBQ0ZBLEtBQUtLLFVBRVos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SixFQUFJc0ksbUJBQW1DLGVBQUl0SSxFQUFJTSxxQkFFaEROLEVBQUkwQixLQUFLLGtCQUFtQixjQXBVN0IsQ0EwVUk4QixHQUFHK0UsVUFBV0MsT0FBUUMiLCJmaWxlIjoiY3VzdG9taXplLWFjZi1maWVsZGdyb3VwLWNvbnRyb2wubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4oZnVuY3Rpb24oIGFwaSwgJCwgb3B0aW9ucyApIHtcblxuXHQvLyBzdG9yZSBmb3IgYWNmJ3Mgc3RhdGljIHZhbGlkYXRpb24gY2FsbGJhY2tzXG5cdHZhciBjdXJyZW50X2NvbnRyb2wsXG5cdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0LFxuXHRcdHF1ZXVlID0gW107XG5cblx0Ly8gbWFrZSBzdXJlIGZpZWxkcyBnZXQgaW5pdGVkIGluIHRoZSBvcmRlciB0aGV5IGFwcGVhciBpbiB0aGUgZG9tXG5cdGZ1bmN0aW9uIGVucXVldWUocmVxdWVzdCxkb25lKSB7XG5cdFx0dmFyIGlkeCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGl0ZW0gPSB7IGlkeDppZHgsIHJlcXVlc3Q6cmVxdWVzdCwgZG9uZTogZG9uZSwgZmluaXNoZWQ6ZmFsc2UsIHNjb3BlOm51bGwsIGFyZ3VtZW50czpudWxsIH07XG5cblx0XHRxdWV1ZS5wdXNoKCBpdGVtICk7XG5cblx0XHRyZXF1ZXN0LmRvbmUoIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgaXQ7XG5cdFx0XHRpdGVtLmZpbmlzaGVkID0gdHJ1ZTtcblx0XHRcdGl0ZW0uc2VsZiA9IHRoaXM7XG5cdFx0XHRpdGVtLmFyZ3VtZW50cyA9IGFyZ3VtZW50cztcblx0XHRcdHdoaWxlICggcXVldWUubGVuZ3RoICYmIHF1ZXVlWzBdLmZpbmlzaGVkICkge1xuXHRcdFx0XHRpdCA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdGl0LmRvbmUuYXBwbHkoIGl0LnNlbGYsIGl0LmFyZ3VtZW50cyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gZXhwYW5kUmVwZWF0YWJsZXMoIGV4cGFuZCApIHtcblx0XHRyZXR1cm4gZXhwYW5kLmZvckVhY2goZnVuY3Rpb24oJHJvdyl7XG5cdFx0XHR2YXIgZmllbGQgPSBhY2YuZ2V0RmllbGQoICRyb3cuY2xvc2VzdCgnLmFjZi1maWVsZCcpICk7XG5cdFx0XHQvLyBjb2xsYXBzZSBvdGhlcnNcblx0XHRcdCRyb3cuc2libGluZ3MoKS5ub3QoJHJvdykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRpZiAoIGZpZWxkLnR5cGUgPT09ICdyZXBlYXRlcicgKSB7XG5cdFx0XHRcdFx0ZmllbGQuY29sbGFwc2UoJCh0aGlzKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIGZpZWxkLnR5cGUgPT09ICdmbGV4aWJsZV9jb250ZW50JyApIHtcblx0XHRcdFx0XHRmaWVsZC5jbG9zZUxheW91dCgkKHRoaXMpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGlmICggZmllbGQudHlwZSA9PT0gJ3JlcGVhdGVyJyApIHtcblx0XHRcdFx0ZmllbGQuZXhwYW5kKCRyb3cpO1xuXHRcdFx0fSBlbHNlIGlmICggZmllbGQudHlwZSA9PT0gJ2ZsZXhpYmxlX2NvbnRlbnQnICkge1xuXHRcdFx0XHRmaWVsZC5vcGVuTGF5b3V0KCRyb3cpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH1cblxuXG5cdGFwaS5BY2ZGaWVsZEdyb3VwQ29udHJvbCA9IGFwaS5Db250cm9sLmV4dGVuZCh7XG5cdFx0cHJldmlld19jb250ZXh0OiB7XG5cdFx0XHR0eXBlOiBudWxsLFxuXHRcdFx0aWQ6IG51bGwsXG5cdFx0fSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbiggaWQsIG9wdCApIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcywgYXJncztcblxuICAgICAgICAgICAgYXJncyA9IG9wdCB8fCB7fTtcblxuXHRcdFx0YXBpLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCggY29udHJvbCwgaWQsIGFyZ3MgKTtcblxuXHRcdH0sXG5cdFx0c2V0X3ByZXZpZXdfY29udGV4dDogZnVuY3Rpb24oY29udGV4dCkge1xuXHRcdFx0dGhpcy5wcmV2aWV3X2NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZWFkeTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsXG5cdFx0XHRcdHNldHRpbmdzID0gdGhpcy5zZXR0aW5nKCk7XG5cblx0XHRcdGlmICggMCA8PSBbJ3Bvc3QnLCd0ZXJtJywndXNlciddLmluZGV4T2YoIGNvbnRyb2wucGFyYW1zLnN0b3JhZ2VfdHlwZSApICkge1xuXHRcdFx0XHQvLyByZWxvYWQgZmllbGRzIGlmIHByZXZpZXcgdXJsIGNoYW5nZWRcblx0XHRcdFx0YXBpLmJpbmQoICdhY2YtY3VzdG9taXplLWNvbnRleHQtY2hhbmdlZCcsIGZ1bmN0aW9uKCBjb250ZXh0ICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0LnR5cGUgPT09IGNvbnRyb2wucGFyYW1zLnN0b3JhZ2VfdHlwZSApIHtcblx0XHRcdFx0XHRcdGNvbnRyb2xcblx0XHRcdFx0XHRcdFx0LnNldF9wcmV2aWV3X2NvbnRleHQoIGNvbnRleHQgKVxuXHRcdFx0XHRcdFx0XHQubG9hZF9mb3JtKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnRyb2wudW5sb2FkX2Zvcm0oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLiR3cmFwcGVyID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZHMnKS5maXJzdCgpO1xuXHRcdFx0YWNmLmRvX2FjdGlvbiggJ2FwcGVuZCcsIGNvbnRyb2wuY29udGFpbmVyICk7XG5cblx0XHRcdGNvbnRyb2wubG9hZF9mb3JtKCk7XG5cblx0XHRcdGNvbnRyb2wuY29udGFpbmVyLm9uKCdjaGFuZ2UnLCcuYWNmLWZpZWxkJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdC8vKlxuXHRcdFx0XHQvLyBjaGVjayB2YWxpZFxuXHRcdFx0XHR2YXIgJGlucHV0cyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGQgOmlucHV0W25hbWVdJyk7XG5cblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uZXJyb3JzID0gW107XG5cdFx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5idXN5ID0gZmFsc2U7XG5cdFx0XHRcdGN1cnJlbnRfY29udHJvbCA9IGNvbnRyb2w7XG5cblx0XHRcdFx0Ly8gcmVzZXQgdmFsaWRhdGlvbiBzdGF0dXNcblx0XHRcdFx0JCggY29udHJvbC5jb250YWluZXIgKS5kYXRhKCdhY2YnLG51bGwpO1xuXG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmZldGNoKCB7XG5cdFx0XHRcdFx0Zm9ybTogY29udHJvbC5jb250YWluZXIsXG5cdFx0XHRcdFx0bG9jazpmYWxzZSxcblx0XHRcdFx0XHRzdWNjZXNzOmZ1bmN0aW9uKCRmb3JtKSB7XG5cdFx0XHRcdFx0XHQvLyBhbGxvdyBmb3Igc3VibWl0XG5cdFx0XHRcdFx0XHQvLyBhY2YudmFsaWRhdGlvbi5pZ25vcmUgPSAxO1xuXHRcdFx0XHRcdFx0Ly8gJGJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y29tcGxldGU6ZnVuY3Rpb24oJGZvcm0pIHtcblx0XHRcdFx0XHRcdGFjZi51bmxvY2tGb3JtKCAkZm9ybSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9KTtcblxuXHRcdFx0YXBpLkNvbnRyb2wucHJvdG90eXBlLnJlYWR5LmFwcGx5KCBjb250cm9sLCBhcmd1bWVudHMgKTtcblxuXHRcdH0sXG5cdFx0bG9hZF9mb3JtOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHRyZXF1ZXN0O1xuXG5cdFx0XHRyZXF1ZXN0ID0gd3AuYWpheC5zZW5kKCAnbG9hZF9jdXN0b21pemVyX2ZpZWxkX2dyb3Vwc18nICsgY29udHJvbC5pZCwge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0d3BfY3VzdG9taXplXHRcdFx0OiAnb24nLFxuXHRcdFx0XHRcdHNlY3Rpb25faWRcdFx0XHRcdDogY29udHJvbC5pZCxcblx0XHRcdFx0XHRhY2ZfY3VzdG9taXplX2NvbnRleHRcdDogSlNPTi5zdHJpbmdpZnkoIGNvbnRyb2wucHJldmlld19jb250ZXh0ICksXG5cdFx0XHRcdFx0X25vbmNlXHRcdFx0XHRcdDogb3B0aW9ucy5sb2FkX2ZpZWxkX2dyb3VwX25vbmNlLFxuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblxuXHRcdFx0ZW5xdWV1ZSggcmVxdWVzdCwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcblxuXHRcdFx0XHRjb250cm9sLiR3cmFwcGVyLmh0bWwoIHJlc3BvbnNlLmh0bWwgKTtcblxuXHRcdFx0XHRjb250cm9sLmluaXRfZmllbGRzKCk7XG5cblx0XHRcdH0gKTtcblx0XHRcdHJlcXVlc3QuZmFpbCggZnVuY3Rpb24oIHJlc3BvbnNlICkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnIC0gbG9hZCBmaWVsZCBncm91cCBmYWlsdXJlJylcblx0XHRcdH0gKTtcblxuXHRcdFx0cmVxdWVzdC5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXF1ZXN0ID0gbnVsbDtcblx0XHRcdH0gKTtcblxuXHRcdH0sXG5cdFx0dW5sb2FkX2Zvcm06IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzO1xuXG5cdFx0XHRjb250cm9sLiR3cmFwcGVyLmh0bWwoICcnICk7XG5cdFx0fSxcblx0XHRpbml0X2ZpZWxkczogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBjb250cm9sID0gdGhpcztcblxuXHRcdFx0Y29udHJvbC4kZmllbGRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyk7XG5cblx0XHRcdC8vIHdpbGwgaW5pdCBmaWVsZHNcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0YWNmLmRvQWN0aW9uKCdyZWFkeScsIGNvbnRyb2wuJHdyYXBwZXIpO1xuXHRcdFx0XHRhY2YuZG9BY3Rpb24oJ3ByZXBhcmUnKTtcblx0XHRcdH0sMSk7XG5cdFx0fSxcblx0XHR1cGRhdGVWYWx1ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHQkaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKSxcblx0XHRcdFx0dmFsdWU7XG5cblx0XHRcdC8vIGNvbnZlcnQgb2JqZWN0IHdpdGggcHJlZml4ZWQgbnVtZXJpYyBrZXlzIHRvIGFycmF5XG5cdFx0XHRmdW5jdGlvbiBmaXhOdW1LZXlzKCBvYmogKSB7XG5cdFx0XHRcdGlmICggJC5pc1BsYWluT2JqZWN0KCBvYmogKSApIHtcblx0XHRcdFx0XHQvLyBjb252ZXJ0IG9iamVjdHMgd2l0aCBudW1lcmljIGtleXMgdG8gYXJyYXlcblx0XHRcdFx0XHRpZiAoIE9iamVjdC5rZXlzKCBvYmogKS5qb2luKCcnKS5tYXRjaCgvXihbMC05X10rKSQvKSApIHtcblx0XHRcdFx0XHRcdG9iaiA9IE9iamVjdC52YWx1ZXMoIG9iaiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyByZWN1cnNlXG5cdFx0XHRcdFx0JC5lYWNoKCBvYmosZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0XHRvYmpbaV0gPSBmaXhOdW1LZXlzKCBlbCApO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb2JqO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBwcmVmaXggbnVtZXJpYyBrZXlzIHdpdGggYF9gXG5cdFx0XHQvLyByZXBlYXRlciBmaWVsZCBuYW1lcyBoYXZlIG51bWVyaWMga2V5cywgd2hpY2ggZ2V0IGF1dG9tYXRpY2FsbHkgc29ydGVkIHVwb24gc2VyaWFsaXphdGlvbi5cblx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHR2YXIgbmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpO1xuXG5cdFx0XHRcdGlmICggISBuYW1lICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHQkKHRoaXMpLmRhdGEoJ3ByZXYtbmFtZScsIG5hbWUgKTtcblx0XHRcdFx0JCh0aGlzKS5hdHRyKCduYW1lJyxuYW1lLnJlcGxhY2UoIC9cXFsoWzAtOV0rKVxcXS9nLCAnXFxbXyQxXFxdJykpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHZhbHVlID0gJGlucHV0cy5zZXJpYWxpemVKU09OKHtcblx0XHRcdFx0dXNlSW50S2V5c0FzQXJyYXlJbmRleDpmYWxzZSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyAuLi4gcmVzdG9yaW5nIGZpZWxkIG5hbWVzIHRvIHByZXZpb3VzIHN0YXRlXG5cdFx0XHQkaW5wdXRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0JCh0aGlzKS5hdHRyKCAnbmFtZScsICQodGhpcykuZGF0YSgncHJldi1uYW1lJykgKTtcblx0XHRcdFx0JCh0aGlzKS5kYXRhKCdwcmV2LW5hbWUnLCBudWxsICk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gdXBkYXRlIGN1c3RvbWllciB2YWx1ZVxuXHRcdFx0Y29udHJvbC5zZXR0aW5nLnNldCggZml4TnVtS2V5cyggdmFsdWVbdGhpcy5pZCBdICkgKTtcblx0XHR9LFxuXHRcdGZvY3VzRmllbGQ6ZnVuY3Rpb24oIHBhdGggKSB7XG5cdFx0XHR2YXIgY3VycmVudCwgc2VsZWN0b3IsICRmb2N1c0VsID0gdGhpcy4kd3JhcHBlciwgZXhwYW5kID0gW107XG5cblx0XHRcdHdoaWxlICggcGF0aC5sZW5ndGggKSB7XG5cdFx0XHRcdGN1cnJlbnQgPSBwYXRoLnBvcCgpO1xuXHRcdFx0XHRpZiAoIF8uaXNOdW1iZXIoIGN1cnJlbnQgKSApIHtcblxuXHRcdFx0XHRcdGlmICggJGZvY3VzRWwuaXMoJ1tkYXRhLXR5cGU9XCJmbGV4aWJsZV9jb250ZW50XCJdJykgKSB7XG5cdFx0XHRcdFx0XHQkZm9jdXNFbCA9ICRmb2N1c0VsLmZpbmQoJz4gLmFjZi1pbnB1dCA+IC5hY2YtZmxleGlibGUtY29udGVudCA+IC52YWx1ZXMnKS5jaGlsZHJlbignOm5vdCguYWNmLWNsb25lKScpLmVxKGN1cnJlbnQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoICRmb2N1c0VsLmlzKCdbZGF0YS10eXBlPVwicmVwZWF0ZXJcIl0nKSApIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRmb2N1c0VsLmZpbmQoJz4gLmFjZi1pbnB1dCA+IC5hY2YtcmVwZWF0ZXIgPiAuYWNmLXRhYmxlID4gdGJvZHknKSk7XG5cdFx0XHRcdFx0XHQkZm9jdXNFbCA9ICRmb2N1c0VsLmZpbmQoJz4gLmFjZi1pbnB1dCA+IC5hY2YtcmVwZWF0ZXIgPiAuYWNmLXRhYmxlID4gdGJvZHknKS5jaGlsZHJlbignOm5vdCguYWNmLWNsb25lKScpLmVxKGN1cnJlbnQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkZm9jdXNFbCA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkZm9jdXNFbCA9ICRmb2N1c0VsLmZpbmQoJ1tkYXRhLWtleT1cIicrY3VycmVudCsnXCJdJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhISAkZm9jdXNFbCAmJiAkZm9jdXNFbC5pcygnW2RhdGEtaWRdJykgKSB7XG5cdFx0XHRcdFx0ZXhwYW5kLnB1c2goICRmb2N1c0VsIClcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICEgJGZvY3VzRWwubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBmb2N1cyBjb250cm9sXG5cdFx0XHR0aGlzLmZvY3VzKCk7XG5cblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0Ly8gZXhwYW5kIHJlcGVhdGFibGUsIGNvbGxhcHNlIG90aGVyc1xuXHRcdFx0XHRpZiAoIGV4cGFuZC5sZW5ndGggKSB7XG5cdFx0XHRcdFx0ZXhwYW5kUmVwZWF0YWJsZXMoIGV4cGFuZCApO1xuXHRcdFx0XHR9XG5cblxuXHRcdFx0XHRpZiAoICEgXy5pc051bWJlciggY3VycmVudCApICkge1xuXHRcdFx0XHRcdC8vIGZvY3VzIGlucHV0IC4uXG5cdFx0XHRcdFx0JGZvY3VzRWwuZmluZCgnaW5wdXQnKS5mb2N1cygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIC4uLiBvciBmb2N1cyByZXBlYXRhYmxlXG5cdFx0XHRcdFx0JGZvY3VzRWwuYXR0cigndGFiaW5kZXgnLDEpLmZvY3VzKClcblx0XHRcdFx0fVxuXHRcdFx0fSw1MDApO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9KTtcblxuXHRhY2YuYWRkX2FjdGlvbigndmFsaWRhdGlvbl9zdWNjZXNzJywgZnVuY3Rpb24oZSkge1xuXHRcdGN1cnJlbnRfY29udHJvbC51cGRhdGVWYWx1ZXMoKTtcblx0fSk7XG5cdGFjZi5hZGRfYWN0aW9uKCd2YWxpZGF0aW9uX2ZhaWx1cmUnLGZ1bmN0aW9uKGUpe1xuXHRcdC8vIG5lZWQgdG8gcmVtb3ZlIGFjZiBtZXNzYWdlIGJlY2F1c2UgaXQgZGlzcGxheXMgYSB3cm9uZyBudW1iZXIgb2YgaW52YWxpZCBmaWVsZHNcblx0XHRjdXJyZW50X2NvbnRyb2wuY29udGFpbmVyLmZpbmQoJz4gLmFjZi1lcnJvci1tZXNzYWdlJykucmVtb3ZlKCk7XG5cdH0pO1xuXHRhY2YuYWRkX2FjdGlvbignaW52YWxpZCcsIGZ1bmN0aW9uKCRpbnB1dCl7XG5cdFx0YWNmLnZhbGlkYXRpb24uYnVzeSA9IHRydWU7XG5cdH0pO1xuXG5cblxuXHRhcGkuYmluZCgncmVhZHknLGZ1bmN0aW9uKCl7XG5cdFx0YXBpLnByZXZpZXdlci5iaW5kKCAnYWNmLWN1c3RvbWl6ZS1jb250ZXh0JywgZnVuY3Rpb24oIG5ld192YWwgKSB7XG5cdFx0XHR2YXIgcHJldl92YWw7XG5cblx0XHRcdHByZXZfdmFsID0gYWNmX2N1c3RvbWl6ZV9jb250ZXh0XG5cdFx0XHRpZiAoIEpTT04uc3RyaW5naWZ5KG5ld192YWwpICE9IEpTT04uc3RyaW5naWZ5KHByZXZfdmFsKSApIHtcblx0XHRcdFx0YXBpLnRyaWdnZXIoICdhY2YtY3VzdG9taXplLWNvbnRleHQtY2hhbmdlZCcsIG5ld192YWwgKVxuXHRcdFx0fVxuXHRcdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0ID0gbmV3X3ZhbDtcblx0XHR9KTtcblxuXHRcdGFwaS5wcmV2aWV3ZXIuYmluZCggJ2ZvY3VzLWNvbnRyb2wtZm9yLXNldHRpbmcnLCBmdW5jdGlvbiggc2V0dGluZ0lkICkge1xuXHRcdFx0Ly8gZ2V0IGNsaWNrZWQgZmllbGQgLi4uXG5cdFx0fSk7XG5cblxuXHRcdGFwaS5wcmV2aWV3ZXIuYmluZCggJ2FjZi1mb2N1cycsIGZ1bmN0aW9uKCBwYXRoICkge1xuXHRcdFx0Y29uc29sZS5sb2cocGF0aCk7XG5cdFx0XHR2YXIgcG9zdF9pZCA9IHBhdGgucG9wKCk7XG5cdFx0XHRhcGkuY29udHJvbC5lYWNoKCBmdW5jdGlvbiggY29udHJvbCApIHtcblx0XHRcdFx0aWYgKCBjb250cm9sLmNvbnN0cnVjdG9yPT09YXBpLkFjZkZpZWxkR3JvdXBDb250cm9sICkge1xuXHRcdFx0XHRcdGlmICggXy5pc051bWJlciggcG9zdF9pZCApICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhISBjb250cm9sLnByZXZpZXdfY29udGV4dCAmJiAoIGNvbnRyb2wucHJldmlld19jb250ZXh0LmlkID09PSBwb3N0X2lkICkgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggY29udHJvbC5mb2N1c0ZpZWxkKCBwYXRoICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmICggY29udHJvbC5pZCA9PT0gcG9zdF9pZCAmJiBjb250cm9sLmZvY3VzRmllbGQoIHBhdGggKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0fSk7XG5cblxuXHRhcGkuYmluZCggJ3NhdmUtcmVxdWVzdC1wYXJhbXMnLCBmdW5jdGlvbihxdWVyeSl7XG5cdFx0Xy5leHRlbmQoIHF1ZXJ5LCB7J2FjZl9jdXN0b21pemVfY29udGV4dCcgOiBKU09OLnN0cmluZ2lmeSggYWNmX2N1c3RvbWl6ZV9jb250ZXh0ICl9ICkgO1xuXHR9ICk7XG5cdC8vXG5cbiBcdGFwaS5jb250cm9sQ29uc3RydWN0b3JbJ2FjZl9jdXN0b21pemVyJ10gPSBhcGkuQWNmRmllbGRHcm91cENvbnRyb2w7XG5cblx0YXBpLmJpbmQoJ2NoYW5nZXNldC1lcnJvcicsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9jb25zb2xlLmxvZyhhcmd1bWVudHMpXG5cdH0pO1xuXG5cblxufSkoIHdwLmN1c3RvbWl6ZSwgalF1ZXJ5LCBhY2ZfZmllbGRncm91cF9jb250cm9sICk7XG4iXX0=

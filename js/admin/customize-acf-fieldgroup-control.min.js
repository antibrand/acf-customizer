!function(e,i,o){var a,c,r=[];e.AcfFieldGroupControl=e.Control.extend({preview_context:{type:null,id:null},initialize:function(t,n){var i;i=n||{},e.Control.prototype.initialize.call(this,t,i)},set_preview_context:function(t){return this.preview_context=t,this},ready:function(){var i=this;this.setting();0<=["post","term","user"].indexOf(i.params.storage_type)&&e.bind("acf-customize-context-changed",function(t){t.type===i.params.storage_type?i.set_preview_context(t).load_form():i.unload_form()}),this.$wrapper=i.container.find(".acf-fields").first(),acf.do_action("append",i.container),i.load_form(),i.container.on("change",".acf-field",function(t){var n=i.container.find(".acf-field :input");acf.validation.errors=[],n.each(function(){this.checkValidity()}),acf.validation.busy=!1,a=i,acf.validation.fetch({form:i.container,lock:!1,success:function(t){}})}),e.Control.prototype.ready.apply(i,arguments)},load_form:function(){var t,n,i,e,a=this;t=wp.ajax.send("load_customizer_field_groups_"+a.id,{data:{wp_customize:"on",section_id:a.id,acf_customize_context:JSON.stringify(a.preview_context),_nonce:o.load_field_group_nonce}}),n=t,i=function(t){a.$wrapper.html(t.html),a.init_fields()},e={idx:r.length,request:n,done:i,finished:!1,scope:null,arguments:null},r.push(e),n.done(function(){var t;for(e.finished=!0,e.self=this,e.arguments=arguments;r.length&&r[0].finished;)(t=r.shift()).done.apply(t.self,t.arguments)}),t.fail(function(t){console.log(" - load field group failure")}),t.always(function(){t=null})},unload_form:function(){this.$wrapper.html("")},init_fields:function(){var t=this;t.$fields=t.container.find(".acf-fields > .acf-field"),setTimeout(function(){acf.doAction("ready",t.$wrapper)},1)},updateValues:function(){var t,n=this.container.find(".acf-field :input");n.each(function(){var t=i(this).attr("name");t&&(i(this).data("prev-name",t),i(this).attr("name",t.replace(/\[([0-9]+)\]/g,"[_$1]")))}),t=n.serializeJSON({useIntKeysAsArrayIndex:!1}),n.each(function(){i(this).attr("name",i(this).data("prev-name"))}),this.setting.set(t[this.id])}}),acf.add_action("validation_success",function(t){a.updateValues()}),acf.add_action("validation_failure",function(t){a.container.find("> .acf-error-message").remove()}),acf.add_action("invalid",function(t){acf.validation.busy=!0}),e.bind("ready",function(){e.previewer.bind("acf-customize-context",function(t){var n;n=c,JSON.stringify(t)!=JSON.stringify(n)&&e.trigger("acf-customize-context-changed",t),c=t})}),e.bind("save-request-params",function(t){_.extend(t,{acf_customize_context:JSON.stringify(c)})}),e.controlConstructor.acf_customizer=e.AcfFieldGroupControl,e.bind("changeset-error",function(){})}(wp.customize,jQuery,acf_fieldgroup_control);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWl6ZS1hY2YtZmllbGRncm91cC1jb250cm9sLmpzIl0sIm5hbWVzIjpbImFwaSIsIiQiLCJvcHRpb25zIiwiY3VycmVudF9jb250cm9sIiwiYWNmX2N1c3RvbWl6ZV9jb250ZXh0IiwicXVldWUiLCJBY2ZGaWVsZEdyb3VwQ29udHJvbCIsIkNvbnRyb2wiLCJleHRlbmQiLCJwcmV2aWV3X2NvbnRleHQiLCJ0eXBlIiwiaWQiLCJpbml0aWFsaXplIiwib3B0IiwiYXJncyIsInByb3RvdHlwZSIsImNhbGwiLCJ0aGlzIiwic2V0X3ByZXZpZXdfY29udGV4dCIsImNvbnRleHQiLCJyZWFkeSIsImNvbnRyb2wiLCJzZXR0aW5nIiwiaW5kZXhPZiIsInBhcmFtcyIsInN0b3JhZ2VfdHlwZSIsImJpbmQiLCJsb2FkX2Zvcm0iLCJ1bmxvYWRfZm9ybSIsIiR3cmFwcGVyIiwiY29udGFpbmVyIiwiZmluZCIsImZpcnN0IiwiYWNmIiwiZG9fYWN0aW9uIiwib24iLCJlIiwiJGlucHV0cyIsInZhbGlkYXRpb24iLCJlcnJvcnMiLCJlYWNoIiwiY2hlY2tWYWxpZGl0eSIsImJ1c3kiLCJmZXRjaCIsImZvcm0iLCJsb2NrIiwic3VjY2VzcyIsIiRmb3JtIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJyZXF1ZXN0IiwiZG9uZSIsIml0ZW0iLCJ3cCIsImFqYXgiLCJzZW5kIiwiZGF0YSIsIndwX2N1c3RvbWl6ZSIsInNlY3Rpb25faWQiLCJKU09OIiwic3RyaW5naWZ5IiwiX25vbmNlIiwibG9hZF9maWVsZF9ncm91cF9ub25jZSIsInJlc3BvbnNlIiwiaHRtbCIsImluaXRfZmllbGRzIiwiaWR4IiwibGVuZ3RoIiwiZmluaXNoZWQiLCJzY29wZSIsInB1c2giLCJpdCIsInNlbGYiLCJzaGlmdCIsImZhaWwiLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiJGZpZWxkcyIsInNldFRpbWVvdXQiLCJkb0FjdGlvbiIsInVwZGF0ZVZhbHVlcyIsInZhbHVlIiwibmFtZSIsImF0dHIiLCJyZXBsYWNlIiwic2VyaWFsaXplSlNPTiIsInVzZUludEtleXNBc0FycmF5SW5kZXgiLCJzZXQiLCJhZGRfYWN0aW9uIiwicmVtb3ZlIiwiJGlucHV0IiwicHJldmlld2VyIiwibmV3X3ZhbCIsInByZXZfdmFsIiwidHJpZ2dlciIsInF1ZXJ5IiwiXyIsImNvbnRyb2xDb25zdHJ1Y3RvciIsImN1c3RvbWl6ZSIsImpRdWVyeSIsImFjZl9maWVsZGdyb3VwX2NvbnRyb2wiXSwibWFwcGluZ3MiOiJDQUNBLFNBQVdBLEVBQUtDLEVBQUdDLEdBR2xCLElBQUlDLEVBQ0hDLEVBQ0FDLEVBQVEsR0FzQlRMLEVBQUlNLHFCQUF1Qk4sRUFBSU8sUUFBUUMsT0FBTyxDQUM3Q0MsZ0JBQWlCLENBQ2hCQyxLQUFNLEtBQ05DLEdBQUksTUFFTEMsV0FBWSxTQUFVRCxFQUFJRSxHQUN6QixJQUFvQkMsRUFFWEEsRUFBT0QsR0FBTyxHQUV2QmIsRUFBSU8sUUFBUVEsVUFBVUgsV0FBV0ksS0FKbkJDLEtBSWtDTixFQUFJRyxJQUdyREksb0JBQXFCLFNBQVNDLEdBRTdCLE9BREFGLEtBQUtSLGdCQUFrQlUsRUFDaEJGLE1BRVJHLE1BQU8sV0FDTixJQUFJQyxFQUFVSixLQUNGQSxLQUFLSyxVQUVaLEdBQUssQ0FBQyxPQUFPLE9BQU8sUUFBUUMsUUFBU0YsRUFBUUcsT0FBT0MsZUFFeER6QixFQUFJMEIsS0FBTSxnQ0FBaUMsU0FBVVAsR0FFL0NBLEVBQVFULE9BQVNXLEVBQVFHLE9BQU9DLGFBQ3BDSixFQUNFSCxvQkFBcUJDLEdBQ3JCUSxZQUVGTixFQUFRTyxnQkFNWFgsS0FBS1ksU0FBV1IsRUFBUVMsVUFBVUMsS0FBSyxlQUFlQyxRQUN0REMsSUFBSUMsVUFBVyxTQUFVYixFQUFRUyxXQUVqQ1QsRUFBUU0sWUFFUk4sRUFBUVMsVUFBVUssR0FBRyxTQUFTLGFBQWMsU0FBU0MsR0FHcEQsSUFBSUMsRUFBVWhCLEVBQVFTLFVBQVVDLEtBQUsscUJBRXJDRSxJQUFJSyxXQUFXQyxPQUFTLEdBQ3hCRixF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VUFBV3hELE9BSTVESixFQUFJa0csbUJBQW1DLGVBQUlsRyxFQUFJTSxxQkFFaEROLEVBQUkwQixLQUFLLGtCQUFtQixjQXZON0IsQ0E2TkkyQixHQUFHOEMsVUFBV0MsT0FBUUMiLCJmaWxlIjoiY3VzdG9taXplLWFjZi1maWVsZGdyb3VwLWNvbnRyb2wubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4oZnVuY3Rpb24oIGFwaSwgJCwgb3B0aW9ucyApIHtcblxuXHQvLyBzdG9yZSBmb3IgYWNmJ3Mgc3RhdGljIHZhbGlkYXRpb24gY2FsbGJhY2tzXG5cdHZhciBjdXJyZW50X2NvbnRyb2wsXG5cdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0LFxuXHRcdHF1ZXVlID0gW107XG5cblx0Ly8gbWFrZSBzdXJlIGZpZWxkcyBnZXQgaW5pdGVkIGluIHRoZSBvcmRlciB0aGV5IGFwcGVhciBpbiB0aGUgZG9tXG5cdGZ1bmN0aW9uIGVucXVldWUocmVxdWVzdCxkb25lKSB7XG5cdFx0dmFyIGlkeCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGl0ZW0gPSB7IGlkeDppZHgsIHJlcXVlc3Q6cmVxdWVzdCwgZG9uZTogZG9uZSwgZmluaXNoZWQ6ZmFsc2UsIHNjb3BlOm51bGwsIGFyZ3VtZW50czpudWxsIH07XG5cblx0XHRxdWV1ZS5wdXNoKCBpdGVtICk7XG5cblx0XHRyZXF1ZXN0LmRvbmUoIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgaXQ7XG5cdFx0XHRpdGVtLmZpbmlzaGVkID0gdHJ1ZTtcblx0XHRcdGl0ZW0uc2VsZiA9IHRoaXM7XG5cdFx0XHRpdGVtLmFyZ3VtZW50cyA9IGFyZ3VtZW50cztcblx0XHRcdHdoaWxlICggcXVldWUubGVuZ3RoICYmIHF1ZXVlWzBdLmZpbmlzaGVkICkge1xuXHRcdFx0XHRpdCA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdGl0LmRvbmUuYXBwbHkoIGl0LnNlbGYsIGl0LmFyZ3VtZW50cyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxuXG5cblx0YXBpLkFjZkZpZWxkR3JvdXBDb250cm9sID0gYXBpLkNvbnRyb2wuZXh0ZW5kKHtcblx0XHRwcmV2aWV3X2NvbnRleHQ6IHtcblx0XHRcdHR5cGU6IG51bGwsXG5cdFx0XHRpZDogbnVsbCxcblx0XHR9LFxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCBpZCwgb3B0ICkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLCBhcmdzO1xuXG4gICAgICAgICAgICBhcmdzID0gb3B0IHx8IHt9O1xuXG5cdFx0XHRhcGkuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5jYWxsKCBjb250cm9sLCBpZCwgYXJncyApO1xuXG5cdFx0fSxcblx0XHRzZXRfcHJldmlld19jb250ZXh0OiBmdW5jdGlvbihjb250ZXh0KSB7XG5cdFx0XHR0aGlzLnByZXZpZXdfY29udGV4dCA9IGNvbnRleHQ7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHJlYWR5OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcyxcblx0XHRcdFx0c2V0dGluZ3MgPSB0aGlzLnNldHRpbmcoKTtcblxuXHRcdFx0aWYgKCAwIDw9IFsncG9zdCcsJ3Rlcm0nLCd1c2VyJ10uaW5kZXhPZiggY29udHJvbC5wYXJhbXMuc3RvcmFnZV90eXBlICkgKSB7XG5cdFx0XHRcdC8vIHJlbG9hZCBmaWVsZHMgaWYgcHJldmlldyB1cmwgY2hhbmdlZFxuXHRcdFx0XHRhcGkuYmluZCggJ2FjZi1jdXN0b21pemUtY29udGV4dC1jaGFuZ2VkJywgZnVuY3Rpb24oIGNvbnRleHQgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGNvbnRleHQudHlwZSA9PT0gY29udHJvbC5wYXJhbXMuc3RvcmFnZV90eXBlICkge1xuXHRcdFx0XHRcdFx0Y29udHJvbFxuXHRcdFx0XHRcdFx0XHQuc2V0X3ByZXZpZXdfY29udGV4dCggY29udGV4dCApXG5cdFx0XHRcdFx0XHRcdC5sb2FkX2Zvcm0oKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udHJvbC51bmxvYWRfZm9ybSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuJHdyYXBwZXIgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkcycpLmZpcnN0KCk7XG5cdFx0XHRhY2YuZG9fYWN0aW9uKCAnYXBwZW5kJywgY29udHJvbC5jb250YWluZXIgKTtcblxuXHRcdFx0Y29udHJvbC5sb2FkX2Zvcm0oKTtcblxuXHRcdFx0Y29udHJvbC5jb250YWluZXIub24oJ2NoYW5nZScsJy5hY2YtZmllbGQnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0Ly8qXG5cdFx0XHRcdC8vIGNoZWNrIHZhbGlkXG5cdFx0XHRcdHZhciAkaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKTtcblxuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5lcnJvcnMgPSBbXTtcblx0XHRcdFx0JGlucHV0cy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dGhpcy5jaGVja1ZhbGlkaXR5KCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmJ1c3kgPSBmYWxzZTtcblx0XHRcdFx0Y3VycmVudF9jb250cm9sID0gY29udHJvbDtcblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uZmV0Y2goIHtcblx0XHRcdFx0XHRmb3JtOiBjb250cm9sLmNvbnRhaW5lcixcblx0XHRcdFx0XHRsb2NrOmZhbHNlLFxuXHRcdFx0XHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oJGZvcm0pIHtcblx0XHRcdFx0XHRcdC8vIGFsbG93IGZvciBzdWJtaXRcblx0XHRcdFx0XHRcdC8vIGFjZi52YWxpZGF0aW9uLmlnbm9yZSA9IDE7XG5cdFx0XHRcdFx0XHQvLyAkYnV0dG9uLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRhcGkuQ29udHJvbC5wcm90b3R5cGUucmVhZHkuYXBwbHkoIGNvbnRyb2wsIGFyZ3VtZW50cyApO1xuXG5cdFx0fSxcblx0XHRsb2FkX2Zvcm06IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsXG5cdFx0XHRcdHJlcXVlc3Q7XG5cblx0XHRcdHJlcXVlc3QgPSB3cC5hamF4LnNlbmQoICdsb2FkX2N1c3RvbWl6ZXJfZmllbGRfZ3JvdXBzXycrY29udHJvbC5pZCwge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0d3BfY3VzdG9taXplXHRcdFx0OiAnb24nLFxuXHRcdFx0XHRcdHNlY3Rpb25faWRcdFx0XHRcdDogY29udHJvbC5pZCxcblx0XHRcdFx0XHRhY2ZfY3VzdG9taXplX2NvbnRleHRcdDogSlNPTi5zdHJpbmdpZnkoIGNvbnRyb2wucHJldmlld19jb250ZXh0ICksXG5cdFx0XHRcdFx0X25vbmNlXHRcdFx0XHRcdDogb3B0aW9ucy5sb2FkX2ZpZWxkX2dyb3VwX25vbmNlLFxuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8qXG5cdFx0XHRyZXF1ZXN0LmRvbmUoIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cblx0XHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCByZXNwb25zZS5odG1sICk7XG5cblx0XHRcdFx0Y29udHJvbC5pbml0X2ZpZWxkcygpO1xuXG5cdFx0XHR9ICk7XG5cdFx0XHQvKi9cblx0XHRcdGVucXVldWUoIHJlcXVlc3QsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cblx0XHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCByZXNwb25zZS5odG1sICk7XG5cblx0XHRcdFx0Y29udHJvbC5pbml0X2ZpZWxkcygpO1xuXG5cdFx0XHR9ICk7XG5cdFx0XHRyZXF1ZXN0LmZhaWwoIGZ1bmN0aW9uKCByZXNwb25zZSApIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJyAtIGxvYWQgZmllbGQgZ3JvdXAgZmFpbHVyZScpXG5cdFx0XHR9ICk7XG5cblx0XHRcdHJlcXVlc3QuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVxdWVzdCA9IG51bGw7XG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXHRcdHVubG9hZF9mb3JtOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcztcblxuXHRcdFx0Y29udHJvbC4kd3JhcHBlci5odG1sKCAnJyApO1xuXHRcdH0sXG5cdFx0aW5pdF9maWVsZHM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXM7XG5cblx0XHRcdGNvbnRyb2wuJGZpZWxkcyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcpO1xuXG5cdFx0XHQvLyB3aWxsIGluaXQgZmllbGRzXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGFjZi5kb0FjdGlvbigncmVhZHknLCBjb250cm9sLiR3cmFwcGVyKTtcblx0XHRcdH0sMSk7XG5cdFx0fSxcblx0XHR1cGRhdGVWYWx1ZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzLFxuXHRcdFx0XHQkaW5wdXRzID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZCA6aW5wdXQnKSxcblx0XHRcdFx0dmFsdWU7XG5cblx0XHRcdC8vIHByZWZpeGluZyBudW1lcmljIGtleXMgd2l0aCBhIGBfYFxuXHRcdFx0Ly8gcmVwZWF0ZXIgZmllbGQgbmFtZXMgaGF2ZSBudW1lcmljIGtleXMsIHdoaWNoIGdldCBjYXN0ZWQgdG8gaW50IHVwb24gc2VyaWFsaXphdGlvbi5cblx0XHRcdC8vIEFzIGEgcmVzdWx0IHRoZSBzb3J0aW5nIGluZm9ybWF0aW9uIGlzIGxvc3QgLi4uXG5cdFx0XHQkaW5wdXRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIG5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTtcblx0XHRcdFx0aWYgKCAhIG5hbWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQodGhpcykuZGF0YSgncHJldi1uYW1lJywgbmFtZSApO1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoJ25hbWUnLG5hbWUucmVwbGFjZSgvXFxbKFswLTldKylcXF0vZywnXFxbXyQxXFxdJykpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHZhbHVlID0gJGlucHV0cy5zZXJpYWxpemVKU09OKHtcblx0XHRcdFx0dXNlSW50S2V5c0FzQXJyYXlJbmRleDpmYWxzZVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIC4uLiByZXN0b3JpbmcgZmllbGQgbmFtZXMgdG8gcHJldmlvdXMgc3RhdGVcblx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoICduYW1lJywgJCh0aGlzKS5kYXRhKCdwcmV2LW5hbWUnKSApO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHVwZGF0ZSB2YWx1ZXMuXG5cdFx0XHRjb250cm9sLnNldHRpbmcuc2V0KCB2YWx1ZVt0aGlzLmlkXSApO1xuXHRcdH1cblx0fSk7XG5cblx0YWNmLmFkZF9hY3Rpb24oJ3ZhbGlkYXRpb25fc3VjY2VzcycsIGZ1bmN0aW9uKGUpIHtcblx0XHRjdXJyZW50X2NvbnRyb2wudXBkYXRlVmFsdWVzKCk7XG5cdH0pO1xuXHRhY2YuYWRkX2FjdGlvbigndmFsaWRhdGlvbl9mYWlsdXJlJyxmdW5jdGlvbihlKXtcblx0XHQvLyBuZWVkIHRvIHJlbW92ZSBhY2YgbWVzc2FnZSBiZWNhdXNlIGl0IGRpc3BsYXlzIGEgd3JvbmcgbnVtYmVyIG9mIGludmFsaWQgZmllbGRzXG5cdFx0Y3VycmVudF9jb250cm9sLmNvbnRhaW5lci5maW5kKCc+IC5hY2YtZXJyb3ItbWVzc2FnZScpLnJlbW92ZSgpO1xuXHR9KTtcblx0YWNmLmFkZF9hY3Rpb24oJ2ludmFsaWQnLCBmdW5jdGlvbigkaW5wdXQpe1xuXHRcdGFjZi52YWxpZGF0aW9uLmJ1c3kgPSB0cnVlO1xuXHR9KTtcblxuXG5cblx0YXBpLmJpbmQoJ3JlYWR5JyxmdW5jdGlvbigpe1xuXHRcdGFwaS5wcmV2aWV3ZXIuYmluZCggJ2FjZi1jdXN0b21pemUtY29udGV4dCcsIGZ1bmN0aW9uKCBuZXdfdmFsICkge1xuXHRcdFx0dmFyIHByZXZfdmFsO1xuXG5cdFx0XHRwcmV2X3ZhbCA9IGFjZl9jdXN0b21pemVfY29udGV4dFxuXHRcdFx0aWYgKCBKU09OLnN0cmluZ2lmeShuZXdfdmFsKSAhPSBKU09OLnN0cmluZ2lmeShwcmV2X3ZhbCkgKSB7XG5cdFx0XHRcdGFwaS50cmlnZ2VyKCAnYWNmLWN1c3RvbWl6ZS1jb250ZXh0LWNoYW5nZWQnLCBuZXdfdmFsIClcblx0XHRcdH1cblx0XHRcdGFjZl9jdXN0b21pemVfY29udGV4dCA9IG5ld192YWw7XG5cdFx0fSk7XG5cdH0pO1xuXG5cblx0YXBpLmJpbmQoICdzYXZlLXJlcXVlc3QtcGFyYW1zJywgZnVuY3Rpb24ocXVlcnkpe1xuXHRcdF8uZXh0ZW5kKCBxdWVyeSwgeydhY2ZfY3VzdG9taXplX2NvbnRleHQnIDogSlNPTi5zdHJpbmdpZnkoIGFjZl9jdXN0b21pemVfY29udGV4dCApfSApIDtcblx0fSApO1xuXHQvL1xuXG4gXHRhcGkuY29udHJvbENvbnN0cnVjdG9yWydhY2ZfY3VzdG9taXplciddID0gYXBpLkFjZkZpZWxkR3JvdXBDb250cm9sO1xuXG5cdGFwaS5iaW5kKCdjaGFuZ2VzZXQtZXJyb3InLCBmdW5jdGlvbigpe1xuXHRcdC8vY29uc29sZS5sb2coYXJndW1lbnRzKVxuXHR9KTtcblxuXG5cbn0pKCB3cC5jdXN0b21pemUsIGpRdWVyeSwgYWNmX2ZpZWxkZ3JvdXBfY29udHJvbCApO1xuIl19
